<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>System Notes</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2016-05-12T09:04:04.807Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Wu Dong</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>块设备内核参数max_segments和max_sectors_kb解析</title>
    <link href="http://yoursite.com/2016/05/12/max-seg-max-sec/"/>
    <id>http://yoursite.com/2016/05/12/max-seg-max-sec/</id>
    <published>2016-05-12T08:47:03.000Z</published>
    <updated>2016-05-12T09:04:04.807Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x5728;DMA&amp;#x8BBE;&amp;#x5907;&amp;#x4E0D;&amp;#x91C7;&amp;#x7528;S/G&amp;#xFF08;&amp;#x5206;&amp;#x6563;/&amp;#x805A;&amp;#x96C6;&amp;#xFF09;&amp;#x6A21;&amp;#x5F0F;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x5FC5;&amp;#x987B;&amp;#x4FDD;&amp;#x8BC1;&amp;#x7F13;&amp;#x51B2;&amp;#x533A;&amp;#x662F;&amp;#x7269;&amp;#x7406;&amp;#x4E0A;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF0C;linux&amp;#x5185;&amp;#x6838;&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7528;&amp;#x6765;&amp;#x5206;&amp;#x914D;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#xFF1A;kmalloc()&amp;#x548C;&lt;strong&gt;get_free_pages()&amp;#x3002;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x90FD;&amp;#x6709;&amp;#x5206;&amp;#x914D;&amp;#x8FDE;&amp;#x7EED;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x503C;&amp;#xFF0C;kmalloc&amp;#x4EE5;&amp;#x5206;&amp;#x914D;&amp;#x5B57;&amp;#x8282;&amp;#x4E3A;&amp;#x5355;&amp;#x4F4D;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;&amp;#x7EA6;&amp;#x4E3A;64KB&amp;#xFF0C;&lt;/strong&gt;get_free_pages()&amp;#x4EE5;&amp;#x5206;&amp;#x914D;&amp;#x9875;&amp;#x4E3A;&amp;#x5355;&amp;#x4F4D;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;&amp;#x80FD;&amp;#x5206;&amp;#x914D;2^order&amp;#x6570;&amp;#x76EE;&amp;#x7684;&amp;#x9875;&lt;/p&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;DMA&amp;#x7F13;&amp;#x51B2;&amp;#x533A;&amp;#x7684;&amp;#x4E3B;&amp;#x8981;&amp;#x95EE;&amp;#x9898;&amp;#x662F;&amp;#xFF1A;&amp;#x5F53;&amp;#x5927;&amp;#x4E8E;&amp;#x4E00;&amp;#x9875;&amp;#x65F6;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x5FC5;&amp;#x987B;&amp;#x5360;&amp;#x636E;&amp;#x8FDE;&amp;#x63A5;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x9875;&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x8BBE;&amp;#x5907;&amp;#x4F7F;&amp;#x7528;ISA&amp;#x6216;&amp;#x8005;PCI&amp;#x7CFB;&amp;#x7EDF;&amp;#x603B;&amp;#x7EBF;&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E24;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x7269;&amp;#x7406;&amp;#x5730;&amp;#x5740;&lt;/p&gt;
&lt;p&gt;linux&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x5728;&amp;#x5904;&amp;#x7406;io&amp;#x65F6;&amp;#x4F1A;&amp;#x53D7;&amp;#x5230;&amp;#x4E00;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#xFF08;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;queue limits&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4E0B;&amp;#x7B80;&amp;#x79F0;limits&amp;#x53C2;&amp;#x6570;&amp;#xFF09;&amp;#x7684;&amp;#x5F71;&amp;#x54CD;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E2D;&amp;#x5141;&amp;#x8BB8;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;segment&amp;#x6570;&amp;#x7B49;&amp;#x3002;&amp;#x8FD9;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;/sys/block/&lt;device&gt;/queue/&amp;#x4E0B;&amp;#x67E5;&amp;#x770B;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#x4F1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x5206;&amp;#x6790;max_segments&amp;#x548C;max_sectors_kb&amp;#x3002;&lt;/device&gt;&lt;/p&gt;
&lt;h1 id=&quot;1-&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#1-&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;1.&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&lt;/h1&gt;&lt;h2 id=&quot;1-1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#1-1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;1.1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;1.1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;&amp;#x6BB5;&amp;#xFF08;segment&amp;#xFF09;&amp;#x3002;&lt;br&gt;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BB5;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5185;&amp;#x5B58;&amp;#x9875;&amp;#x6216;&amp;#x8005;&amp;#x5185;&amp;#x5B58;&amp;#x9875;&amp;#x7684;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x5305;&amp;#x542B;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x7269;&amp;#x7406;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x3002;&lt;br&gt;&amp;#x78C1;&amp;#x76D8;&amp;#x7684;&amp;#x6BCF;&amp;#x4E2A;io&amp;#x64CD;&amp;#x4F5C;&amp;#x5C31;&amp;#x662F;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0E;&amp;#x4E00;&amp;#x4E9B;RAM&amp;#x5355;&amp;#x5143;&amp;#x4E4B;&amp;#x95F4;&amp;#x76F8;&amp;#x4E92;&amp;#x4F20;&amp;#x9001;&amp;#x4E00;&amp;#x4E9B;&amp;#x76F8;&amp;#x90BB;&amp;#x6247;&amp;#x533A;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&amp;#x5927;&amp;#x591A;&amp;#x6570;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x91C7;&amp;#x7528;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x53EA;&amp;#x8981;&amp;#x5411;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x53D1;&amp;#x9001;&amp;#x9002;&amp;#x5F53;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x89E6;&amp;#x53D1;&amp;#x4E00;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9001;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;&amp;#x5B8C;&amp;#x6210;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9001;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x5C31;&amp;#x4F1A;&amp;#x53D1;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E2D;&amp;#x65AD;&amp;#x901A;&amp;#x77E5;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&lt;br&gt;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#x4F20;&amp;#x9001;&amp;#x7684;&amp;#x662F;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x867D;&amp;#x7136;&amp;#x4E5F;&amp;#x5141;&amp;#x8BB8;&amp;#x4F20;&amp;#x9001;&amp;#x4E0D;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x4F4E;&amp;#x6548;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x78C1;&amp;#x5934;&amp;#x79FB;&amp;#x52A8;&amp;#x6162;&amp;#x3002;&lt;br&gt;&amp;#x8001;&amp;#x7684;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x4EC5;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;&amp;#x201C;&amp;#x7B80;&amp;#x5355;&amp;#x201D;&amp;#x7684;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF1A;&amp;#x78C1;&amp;#x76D8;&amp;#x5FC5;&amp;#x987B;&amp;#x4E0E;RAM&amp;#x4E2D;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5355;&amp;#x5143;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x65B0;&amp;#x7684;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x652F;&amp;#x6301;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;&amp;#xFF08;scatter-gather&amp;#xFF09;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E0E;&amp;#x4E00;&amp;#x4E9B;&amp;#x975E;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x533A;&amp;#x57DF;&amp;#x76F8;&amp;#x4E92;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;br&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x652F;&amp;#x6301;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5FC5;&amp;#x987B;&amp;#x80FD;&amp;#x591F;&amp;#x5904;&amp;#x7406;&amp;#x79F0;&amp;#x4E3A;&amp;#x6BB5;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5B58;&amp;#x50A8;&amp;#x5355;&amp;#x5143;&amp;#xFF0C;&amp;#x4E00;&amp;#x6B21;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;DMA&amp;#x53EF;&amp;#x4EE5;&amp;#x4F20;&amp;#x9001;&amp;#x51E0;&amp;#x4E2A;&amp;#x6BB5;&amp;#x3002;&lt;br&gt;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x6BB5;&amp;#x5728;RAM&amp;#x4E2D;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x9875;&amp;#x6846;&amp;#x6B63;&amp;#x597D;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5E76;&amp;#x4E14;&amp;#x5728;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x4E5F;&amp;#x662F;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x901A;&amp;#x7528;&amp;#x5757;&amp;#x5C42;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x5408;&amp;#x5E76;&amp;#x65B9;&amp;#x5F0F;&amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x66F4;&amp;#x5927;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x533A;&amp;#x57DF;&amp;#x5C31;&amp;#x79F0;&amp;#x4E3A;&amp;#x7269;&amp;#x7406;&amp;#x6BB5;&amp;#x3002;&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;&lt;br&gt;&lt;img src=&quot;/2016/05/12/max-seg-max-sec/segs.png&quot; alt=&quot;segs&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;1-2&amp;#x5404;&amp;#x53C2;&amp;#x6570;&amp;#x542B;&amp;#x4E49;&quot;&gt;&lt;a href=&quot;#1-2&amp;#x5404;&amp;#x53C2;&amp;#x6570;&amp;#x542B;&amp;#x4E49;&quot; class=&quot;headerlink&quot; title=&quot;1.2&amp;#x5404;&amp;#x53C2;&amp;#x6570;&amp;#x542B;&amp;#x4E49;&quot;&gt;&lt;/a&gt;1.2&amp;#x5404;&amp;#x53C2;&amp;#x6570;&amp;#x542B;&amp;#x4E49;&lt;/h2&gt;&lt;p&gt;max_segments&amp;#x8868;&amp;#x793A;&amp;#x8BBE;&amp;#x5907;&amp;#x80FD;&amp;#x591F;&amp;#x5141;&amp;#x8BB8;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x6BB5;&amp;#x7684;&amp;#x6570;&amp;#x76EE;&amp;#x3002;&lt;br&gt;max_sectors_kb&amp;#x8868;&amp;#x793A;&amp;#x8BBE;&amp;#x5907;&amp;#x5141;&amp;#x8BB8;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x8BF7;&amp;#x6C42;&amp;#x5927;&amp;#x5C0F;&amp;#x3002;&lt;br&gt;max_hw_sectors_kb&amp;#x8868;&amp;#x793A;&amp;#x5355;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x6240;&amp;#x80FD;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#x6700;&amp;#x5927;KB&amp;#xFF08;&amp;#x786C;&amp;#x7EA6;&amp;#x675F;&amp;#xFF09;&lt;/p&gt;
&lt;h1 id=&quot;2-limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x53CA;&amp;#x5F71;&amp;#x54CD;&quot;&gt;&lt;a href=&quot;#2-limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x53CA;&amp;#x5F71;&amp;#x54CD;&quot; class=&quot;headerlink&quot; title=&quot;2.limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x53CA;&amp;#x5F71;&amp;#x54CD;&quot;&gt;&lt;/a&gt;2.limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&amp;#x53CA;&amp;#x5F71;&amp;#x54CD;&lt;/h1&gt;&lt;h2 id=&quot;2-1limits&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&quot;&gt;&lt;a href=&quot;#2-1limits&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&quot; class=&quot;headerlink&quot; title=&quot;2.1limits&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&quot;&gt;&lt;/a&gt;2.1limits&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#x8BBE;&amp;#x7F6E;&lt;/h2&gt;&lt;p&gt;&amp;#x4E00;&amp;#x822C;&amp;#x7684;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;blk_queue_make_request&amp;#x8BBE;&amp;#x7F6E;make_request&amp;#x56DE;&amp;#x8C03;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x4E0E;&amp;#x6B64;&amp;#x540C;&amp;#x65F6;&amp;#xFF0C;&amp;#x8FD8;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;blk_set_default_limits&amp;#x8BBE;&amp;#x7F6E;&amp;#x8BBE;&amp;#x5907;queue&amp;#x7684;&amp;#x9650;&amp;#x5236;&amp;#x7684;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#xFF0C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x503C;&amp;#x5982;&amp;#x4E0B;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;enum&lt;/span&gt; blk_default_limits {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; BLK_MAX_SEGMENTS	= &lt;span class=&quot;number&quot;&gt;128&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; BLK_SAFE_MAX_SECTORS	= &lt;span class=&quot;number&quot;&gt;255&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; BLK_DEF_MAX_SECTORS	= &lt;span class=&quot;number&quot;&gt;1024&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; BLK_MAX_SEGMENT_SIZE	= &lt;span class=&quot;number&quot;&gt;65536&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; BLK_SEG_BOUNDARY_MASK	= &lt;span class=&quot;number&quot;&gt;0xFFFFFFFF&lt;/span&gt;UL,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;};&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-2-DIRECT-IO&amp;#x4E2D;max-segments&amp;#x548C;max-sectors-kb&quot;&gt;&lt;a href=&quot;#2-2-DIRECT-IO&amp;#x4E2D;max-segments&amp;#x548C;max-sectors-kb&quot; class=&quot;headerlink&quot; title=&quot;2.2 DIRECT IO&amp;#x4E2D;max_segments&amp;#x548C;max_sectors_kb&quot;&gt;&lt;/a&gt;2.2 DIRECT IO&amp;#x4E2D;max_segments&amp;#x548C;max_sectors_kb&lt;/h2&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;direct io&amp;#x65F6;&amp;#xFF0C;&amp;#x8DF3;&amp;#x8FC7;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;cache&amp;#xFF0C;io&amp;#x76F4;&amp;#x63A5;&amp;#x4E0B;&amp;#x53D1;&amp;#x5230;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&amp;#x4EE5;write&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF0C;io path&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sys_write() --&amp;gt; vfs_write() --&amp;gt; do_sync_write() --&amp;gt; blkdev_aio_write() --&amp;gt; __generic_file_aio_write() --&amp;gt; generic_file_direct_write() --&amp;gt; blkdev_direct_IO() --&amp;gt; __blockdev_direct_IO() --&amp;gt; submit_page_section() --&amp;gt; dio_send_cur_page() --&amp;gt; dio_bio_submit() --&amp;gt; submit_bio() --&amp;gt; generic_make_request()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;dio_send_cur_page &amp;#x4E2D;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5C1D;&amp;#x8BD5;&amp;#x5C06;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x5408;&amp;#x5E76;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;bio&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x8FD4;&amp;#x56DE;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#x6216;&amp;#x8005;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E0E;&amp;#x5DF2;&amp;#x6709;&amp;#x7684;bio&amp;#x4E0D;&amp;#x8FDE;&amp;#x7EED;&amp;#xFF0C;&amp;#x5C31;&amp;#x76F4;&amp;#x63A5;dio_bio_submit&amp;#x63D0;&amp;#x4EA4;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;br&gt;&amp;#x5176;&amp;#x4E2D;dio_bio_add_page() &amp;#x2013;&amp;gt; bio_add_page() &amp;#x2013;&amp;gt; __bio_add_page() &amp;#x662F;&amp;#x5C06;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x5408;&amp;#x5E76;&amp;#x5230;bio&amp;#x4E2D;&amp;#x3002;&lt;/p&gt;
&lt;h3 id=&quot;1&amp;#xFF09;max-segments&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;max-segments&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09;max_segments&quot;&gt;&lt;/a&gt;1&amp;#xFF09;max_segments&lt;/h3&gt;&lt;p&gt;&amp;#x5728; __bio_add_page&amp;#x6709;&amp;#x5982;&amp;#x4E0B;&amp;#x4E00;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;bio&amp;#x4E2D;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x6BB5;&amp;#x6570;&amp;#x76EE;&amp;#x662F;&amp;#x5426;&amp;#x8D85;&amp;#x8FC7;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8D85;&amp;#x8FC7;&amp;#x5C31;&amp;#x8FD4;&amp;#x56DE;0&amp;#x8868;&amp;#x793A;add page&amp;#x5931;&amp;#x8D25;&amp;#xFF0C;&amp;#x4ECE;&amp;#x800C;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;dio_bio_submit &amp;#x63D0;&amp;#x4EA4;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (bio-&amp;gt;bi_phys_segments &amp;gt;= queue_max_segments(q)) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (retried_segments)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; retried_segments = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; blk_recount_segments(q, bio);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;2&amp;#xFF09;max-sectors-kb&quot;&gt;&lt;a href=&quot;#2&amp;#xFF09;max-sectors-kb&quot; class=&quot;headerlink&quot; title=&quot;2&amp;#xFF09;max_sectors_kb&quot;&gt;&lt;/a&gt;2&amp;#xFF09;max_sectors_kb&lt;/h3&gt;&lt;p&gt;&amp;#x540C;&amp;#x6837;&amp;#x662F;&amp;#x5728;__bio_add_page&amp;#x4E2D;&amp;#xFF0C;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (((bio-&amp;gt;bi_size + len) &amp;gt;&amp;gt; &lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;) &amp;gt; max_sectors)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; return &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;max_sectors&amp;#x5C31;&amp;#x662F;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_sectors_kb*2&amp;#xFF0C;&amp;#x5373;&amp;#x662F;&amp;#x5F53;&amp;#x8BE5;bio&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#x8D85;&amp;#x8FC7;max_sectors_kb&amp;#x65F6;&amp;#xFF0C;&amp;#x5C31;&amp;#x8FD4;&amp;#x56DE;0&amp;#x8868;&amp;#x793A;add page&amp;#x5931;&amp;#x8D25;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;dio_bio_submit&amp;#x63D0;&amp;#x4EA4;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;2-3-Device-Mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;a href=&quot;#2-3-Device-Mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot; class=&quot;headerlink&quot; title=&quot;2.3 Device Mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;/a&gt;2.3 Device Mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&lt;/h2&gt;&lt;p&gt;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x7B80;&amp;#x79F0;dm&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x5728;&amp;#x521A;&amp;#x5F00;&amp;#x59CB;&amp;#x521B;&amp;#x5EFA;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#x4F1A;&amp;#x5148;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x4F1A;&amp;#x6839;&amp;#x636E;&amp;#x5176;&amp;#x5E95;&amp;#x5C42;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x548C;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#xFF0C;&amp;#x4E24;&amp;#x8005;&amp;#x53D6;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#x6765;&amp;#x8BBE;&amp;#x7F6E;dm&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x9650;&amp;#x5236;&amp;#x503C;&amp;#x3002;&amp;#x5176;&amp;#x6D41;&amp;#x7A0B;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;dm_create() --&amp;gt; alloc_dev() --&amp;gt; dm_init_md_queue() --&amp;gt; blk_queue_make_request()&amp;#x8BBE;&amp;#x7F6E;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;dm_calculate_queue_limits&amp;#x4E2D;&amp;#x5148;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x9ED8;&amp;#x8BA4;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x4F1A;&amp;#x6700;&amp;#x7EC8;&amp;#x8C03;&amp;#x7528;blk_stack_limits&amp;#xFF0C;&amp;#x53D6;&amp;#x5E95;&amp;#x5C42;&amp;#x8BBE;&amp;#x5907;&amp;#x548C;dm&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x8FD9;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#x6765;&amp;#x8BBE;&amp;#x7F6E;dm&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;do_resume() --&amp;gt; dm_swap_table() --&amp;gt; dm_calculate_queue_limits() --&amp;gt; ti-&amp;gt;type-&amp;gt;iterate_devices() --&amp;gt;dm_set_device_limits() --&amp;gt; bdev_stack_limits() --&amp;gt; blk_stack_limits()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0D;&amp;#x8FC7;&amp;#x5728;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#x8FD8;&amp;#x6709;&amp;#x4E9B;&amp;#x4E0D;&amp;#x540C;&amp;#xFF0C;&amp;#x4E0A;&amp;#x9762;&amp;#x63CF;&amp;#x8FF0;&amp;#x7684;&amp;#x662F;3.2.54&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#xFF0C;&amp;#x5728;&amp;#x65B0;&amp;#x5185;&amp;#x6838;(3.10.11)&amp;#x4E2D;&amp;#xFF0C;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#x4E5F;&amp;#x4E00;&amp;#x6837;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x5728;dm_calculate_queue_limits&amp;#x4E2D;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;blk_set_stacking_limits()&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x4F1A;&amp;#x628A;limits&amp;#x53C2;&amp;#x6570;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x6781;&amp;#x5927;&amp;#x503C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5728;&amp;#x540E;&amp;#x7EED;&amp;#x8C03;&amp;#x7528;blk_stack_limits&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x4E5F;&amp;#x662F;&amp;#x53D6;&amp;#x4E24;&amp;#x8005;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x56E0;&amp;#x4E3A;dm&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&amp;#x662F;&amp;#x6781;&amp;#x5927;&amp;#x503C;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4F1A;&amp;#x4F7F;&amp;#x7528;&amp;#x5E95;&amp;#x5C42;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x503C;&amp;#x6765;&amp;#x8BBE;&amp;#x7F6E;dm&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x505A;&amp;#x7684;&amp;#x597D;&amp;#x5904;&amp;#x5728;&amp;#x4E8E;&amp;#x53EF;&amp;#x4EE5;&amp;#x7EE7;&amp;#x627F;&amp;#x5E95;&amp;#x5C42;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x9650;&amp;#x5236;&amp;#xFF0C;&amp;#x5E95;&amp;#x5C42;&amp;#x8BBE;&amp;#x5907;&amp;#x90FD;&amp;#x80FD;&amp;#x5904;&amp;#x7406;&amp;#x8FD9;&amp;#x4E9B;limits&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x5728;&amp;#x5B83;&amp;#x4EEC;&amp;#x4E4B;&amp;#x4E0A;&amp;#x7684;dm&amp;#x8BBE;&amp;#x5907;&amp;#x540C;&amp;#x6837;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x9644;&amp;#x4E0A;blk_set_stacking_limits&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;blk_set_stacking_limits&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; queue_limits *lim)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; blk_set_default_limits(lim);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;/* Inherit limits from component devices */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; lim-&amp;gt;discard_zeroes_data = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; lim-&amp;gt;max_segments = USHRT_MAX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; lim-&amp;gt;max_hw_sectors = UINT_MAX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; lim-&amp;gt;max_sectors = UINT_MAX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; lim-&amp;gt;max_write_same_sectors = UINT_MAX;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;2-4-&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E2D;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;a href=&quot;#2-4-&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E2D;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot; class=&quot;headerlink&quot; title=&quot;2.4 &amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E2D;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&quot;&gt;&lt;/a&gt;2.4 &amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E2D;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&lt;/h2&gt;&lt;p&gt;&amp;#x8F6F;raid&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x8FC7;&amp;#x7A0B;&amp;#x53C2;&amp;#x8003;&lt;a href=&quot;http://blog.csdn.net/liumangxiong/article/details/12405231&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/liumangxiong/article/details/12405231&lt;/a&gt;&lt;br&gt;&lt;br&gt;&amp;#x7B80;&amp;#x5355;&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5206;&amp;#x914D;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x6570;&amp;#x636E;&amp;#x7ED3;&amp;#x6784;&amp;#xFF0C;&amp;#x6CE8;&amp;#x518C;&amp;#x8BF7;&amp;#x6C42;&amp;#x5904;&amp;#x7406;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;raid&amp;#x7EA7;&amp;#x522B;&amp;#x518D;&amp;#x8FDB;&amp;#x884C;&amp;#x4E00;&amp;#x4E9B;&amp;#x5FC5;&amp;#x8981;&amp;#x7684;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x3002;&lt;br&gt;&amp;#x8C03;&amp;#x7528;&amp;#x5173;&amp;#x7CFB;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;md_init() --&amp;gt; md_probe() --&amp;gt; md_alloc() --&amp;gt; blk_queue_make_request()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E4B;&amp;#x524D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x8BF4;&amp;#x5230;&amp;#x5728;blk_queue_make_request&amp;#x4E2D;&amp;#x4F1A;&amp;#x6CE8;&amp;#x518C;make_request_fn&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x4F1A;&amp;#x8BBE;&amp;#x7F6E;limits&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;do_md_run --&amp;gt; md_run() --&amp;gt; mddev-&amp;gt;pers-&amp;gt;run(mddev) &amp;#x5BF9;&amp;#x5E94;raid1&amp;#x4E2D;&amp;#x7684;run() --&amp;gt; &amp;#x4F1A;&amp;#x904D;&amp;#x5386;raid&amp;#x4E2D;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x8C03;&amp;#x7528;disk_stack_limits() --&amp;gt; bdev_stack_limits() --&amp;gt; blk_stack_limits()&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E5F;&amp;#x662F;&amp;#x4F1A;&amp;#x6839;&amp;#x636E;md&amp;#x8BBE;&amp;#x5907;&amp;#x548C;&amp;#x5176;&amp;#x5E95;&amp;#x5C42;&amp;#x7684;&amp;#x6210;&amp;#x5458;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;queue-&amp;gt;limits&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4E24;&amp;#x8005;&amp;#x53D6;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0E;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7C7B;&amp;#x4F3C;&amp;#xFF0C;&amp;#x5728;&amp;#x4E0D;&amp;#x540C;&amp;#x5185;&amp;#x6838;&amp;#x4E0B;limits&amp;#x53C2;&amp;#x6570;&amp;#x8BBE;&amp;#x7F6E;&amp;#x8FD8;&amp;#x6709;&amp;#x4E9B;&amp;#x4E0D;&amp;#x540C;&amp;#x3002;&lt;br&gt;&amp;#x4E0A;&amp;#x9762;&amp;#x63CF;&amp;#x8FF0;&amp;#x7684;&amp;#x662F;3.2.54&amp;#x5185;&amp;#x6838;&amp;#x4E0B;&amp;#x7684;&amp;#x6D41;&amp;#x7A0B;&amp;#x3002;&lt;br&gt;&amp;#x5728;3.10.11&amp;#x5185;&amp;#x6838;&amp;#x4E0B;&amp;#xFF0C;md_alloc&amp;#x4E2D;&amp;#x5728;&amp;#x8C03;&amp;#x7528;blk_queue_make_request&amp;#x4E4B;&amp;#x540E;&amp;#x8FD8;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;blk_set_stacking_limits&amp;#x5C06;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;&amp;#x6781;&amp;#x5927;&amp;#x503C;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x80FD;&amp;#x5728;blk_stack_limits&amp;#x4E2D;&amp;#x53D6;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#x65F6;&amp;#x7EE7;&amp;#x627F;&amp;#x5E95;&amp;#x5C42;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;limits&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5728;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x5185;&amp;#x6838;&amp;#x4E0B;&amp;#x5BF9;&amp;#x8F6F;raid1&amp;#x6D4B;&amp;#x8BD5;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x53D1;&amp;#x73B0;&amp;#x533A;&amp;#x522B;&amp;#xFF0C;&amp;#x5F53;fio&amp;#x4F7F;&amp;#x7528;&amp;#x5927;&amp;#x4E8E;127KB&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x65F6;&amp;#xFF0C;&amp;#x5728;3.2.54&amp;#x5185;&amp;#x6838;&amp;#x4F7F;&amp;#x7528;iostat&amp;#x5C31;&amp;#x4F1A;&amp;#x770B;&amp;#x5230;&amp;#x5B9E;&amp;#x9645;&amp;#x843D;&amp;#x5230;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;io&amp;#x5927;&amp;#x5C0F;&amp;#x5C0F;&amp;#x4E8E;fio&amp;#x4E0B;&amp;#x53D1;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5728;3.10.11&amp;#x5C31;&amp;#x6CA1;&amp;#x6709;&amp;#x8FD9;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x63D0;&amp;#x5230;&amp;#x7684;&amp;#x662F;&amp;#x5728;3.10.11&amp;#x5185;&amp;#x6838;&amp;#x4E2D;&amp;#x4E5F;&amp;#x6CA1;&amp;#x6709;&amp;#x300A;systemtap&amp;#x5206;&amp;#x6790;&amp;#x8F6F;raid1 io&amp;#x62C6;&amp;#x5206;&amp;#x95EE;&amp;#x9898;&amp;#x300B;&amp;#x4E2D;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x65B0;&amp;#x5185;&amp;#x6838;&amp;#x7684;raid1&amp;#x4E2D;&amp;#x7684;run()&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x5DF2;&amp;#x7ECF;&amp;#x53D6;&amp;#x6D88;&amp;#x6389;&amp;#x8FD9;&amp;#x6BB5;&amp;#x4EE3;&amp;#x7801;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (rdev-&amp;gt;bdev-&amp;gt;bd_disk-&amp;gt;&lt;span class=&quot;built_in&quot;&gt;queue&lt;/span&gt;-&amp;gt;merge_bvec_fn) {&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  blk_queue_max_segments(mddev-&amp;gt;&lt;span class=&quot;built_in&quot;&gt;queue&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  blk_queue_segment_boundary(mddev-&amp;gt;&lt;span class=&quot;built_in&quot;&gt;queue&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        PAGE_CACHE_SIZE - &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; }&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x5C06;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;1&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;s3-&amp;#x53C2;&amp;#x8003;&amp;#x8D44;&amp;#x6599;&quot;&gt;&lt;a href=&quot;#s3-&amp;#x53C2;&amp;#x8003;&amp;#x8D44;&amp;#x6599;&quot; class=&quot;headerlink&quot; title=&quot;s3. &amp;#x53C2;&amp;#x8003;&amp;#x8D44;&amp;#x6599;&quot;&gt;&lt;/a&gt;s3. &amp;#x53C2;&amp;#x8003;&amp;#x8D44;&amp;#x6599;&lt;/h1&gt;&lt;p&gt;1&amp;#xFF09;&amp;#x300A;&amp;#x6DF1;&amp;#x5165;&amp;#x7406;&amp;#x89E3;linux&amp;#x5185;&amp;#x6838;&amp;#x300B;&lt;br&gt;2&amp;#xFF09;&amp;#x300A;linux&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x300B;&lt;br&gt;3&amp;#xFF09;&amp;#x8F6F;raid&amp;#x4EE3;&amp;#x7801;&amp;#x5206;&amp;#x6790;&lt;a href=&quot;http://blog.csdn.net/liumangxiong/article/details/12405231&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://blog.csdn.net/liumangxiong/article/details/12405231&lt;/a&gt;&lt;br&gt;4&amp;#xFF09;&lt;a href=&quot;https://www.kernel.org/doc/Documentation/block/queue-sysfs.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.kernel.org/doc/Documentation/block/queue-sysfs.txt&lt;/a&gt;&lt;br&gt;5&amp;#xFF09;3.2.54&amp;#x53CA;3.10.11&amp;#x5185;&amp;#x6838;&amp;#x6E90;&amp;#x4EE3;&amp;#x7801;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x5728;DMA&amp;#x8BBE;&amp;#x5907;&amp;#x4E0D;&amp;#x91C7;&amp;#x7528;S/G&amp;#xFF08;&amp;#x5206;&amp;#x6563;/&amp;#x805A;&amp;#x96C6;&amp;#xFF09;&amp;#x6A21;&amp;#x5F0F;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x5FC5;&amp;#x987B;&amp;#x4FDD;&amp;#x8BC1;&amp;#x7F13;&amp;#x51B2;&amp;#x533A;&amp;#x662F;&amp;#x7269;&amp;#x7406;&amp;#x4E0A;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF0C;linux&amp;#x5185;&amp;#x6838;&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x7528;&amp;#x6765;&amp;#x5206;&amp;#x914D;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#xFF1A;kmalloc()&amp;#x548C;&lt;strong&gt;get_free_pages()&amp;#x3002;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x90FD;&amp;#x6709;&amp;#x5206;&amp;#x914D;&amp;#x8FDE;&amp;#x7EED;&amp;#x5185;&amp;#x5B58;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x503C;&amp;#xFF0C;kmalloc&amp;#x4EE5;&amp;#x5206;&amp;#x914D;&amp;#x5B57;&amp;#x8282;&amp;#x4E3A;&amp;#x5355;&amp;#x4F4D;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;&amp;#x7EA6;&amp;#x4E3A;64KB&amp;#xFF0C;&lt;/strong&gt;get_free_pages()&amp;#x4EE5;&amp;#x5206;&amp;#x914D;&amp;#x9875;&amp;#x4E3A;&amp;#x5355;&amp;#x4F4D;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;&amp;#x80FD;&amp;#x5206;&amp;#x914D;2^order&amp;#x6570;&amp;#x76EE;&amp;#x7684;&amp;#x9875;&lt;/p&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;DMA&amp;#x7F13;&amp;#x51B2;&amp;#x533A;&amp;#x7684;&amp;#x4E3B;&amp;#x8981;&amp;#x95EE;&amp;#x9898;&amp;#x662F;&amp;#xFF1A;&amp;#x5F53;&amp;#x5927;&amp;#x4E8E;&amp;#x4E00;&amp;#x9875;&amp;#x65F6;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x5FC5;&amp;#x987B;&amp;#x5360;&amp;#x636E;&amp;#x8FDE;&amp;#x63A5;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x9875;&amp;#xFF0C;&amp;#x8FD9;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x8BBE;&amp;#x5907;&amp;#x4F7F;&amp;#x7528;ISA&amp;#x6216;&amp;#x8005;PCI&amp;#x7CFB;&amp;#x7EDF;&amp;#x603B;&amp;#x7EBF;&amp;#x4F20;&amp;#x8F93;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x800C;&amp;#x8FD9;&amp;#x4E24;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x90FD;&amp;#x662F;&amp;#x7269;&amp;#x7406;&amp;#x5730;&amp;#x5740;&lt;/p&gt;
&lt;p&gt;linux&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x5728;&amp;#x5904;&amp;#x7406;io&amp;#x65F6;&amp;#x4F1A;&amp;#x53D7;&amp;#x5230;&amp;#x4E00;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#xFF08;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;queue limits&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x4EE5;&amp;#x4E0B;&amp;#x7B80;&amp;#x79F0;limits&amp;#x53C2;&amp;#x6570;&amp;#xFF09;&amp;#x7684;&amp;#x5F71;&amp;#x54CD;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E2D;&amp;#x5141;&amp;#x8BB8;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#xFF0C;&amp;#x6700;&amp;#x5927;segment&amp;#x6570;&amp;#x7B49;&amp;#x3002;&amp;#x8FD9;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x53EF;&amp;#x4EE5;&amp;#x5728;/sys/block/&lt;device&gt;/queue/&amp;#x4E0B;&amp;#x67E5;&amp;#x770B;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x5728;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x65F6;&amp;#x4F1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x4E3B;&amp;#x8981;&amp;#x5206;&amp;#x6790;max_segments&amp;#x548C;max_sectors_kb&amp;#x3002;&lt;/device&gt;&lt;/p&gt;
&lt;h1 id=&quot;1-&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#1-&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;1.&amp;#x57FA;&amp;#x672C;&amp;#x6982;&amp;#x5FF5;&lt;/h1&gt;&lt;h2 id=&quot;1-1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;a href=&quot;#1-1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot; class=&quot;headerlink&quot; title=&quot;1.1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&quot;&gt;&lt;/a&gt;1.1&amp;#x6BB5;&amp;#x7684;&amp;#x6982;&amp;#x5FF5;&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x4E86;&amp;#x89E3;&amp;#x4E00;&amp;#x4E0B;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;&amp;#x6BB5;&amp;#xFF08;segment&amp;#xFF09;&amp;#x3002;&lt;br&gt;&amp;#x4E00;&amp;#x4E2A;&amp;#x6BB5;&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5185;&amp;#x5B58;&amp;#x9875;&amp;#x6216;&amp;#x8005;&amp;#x5185;&amp;#x5B58;&amp;#x9875;&amp;#x7684;&amp;#x4E00;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x5B83;&amp;#x4EEC;&amp;#x5305;&amp;#x542B;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x7269;&amp;#x7406;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x3002;&lt;br&gt;&amp;#x78C1;&amp;#x76D8;&amp;#x7684;&amp;#x6BCF;&amp;#x4E2A;io&amp;#x64CD;&amp;#x4F5C;&amp;#x5C31;&amp;#x662F;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0E;&amp;#x4E00;&amp;#x4E9B;RAM&amp;#x5355;&amp;#x5143;&amp;#x4E4B;&amp;#x95F4;&amp;#x76F8;&amp;#x4E92;&amp;#x4F20;&amp;#x9001;&amp;#x4E00;&amp;#x4E9B;&amp;#x76F8;&amp;#x90BB;&amp;#x6247;&amp;#x533A;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x3002;&amp;#x5927;&amp;#x591A;&amp;#x6570;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x91C7;&amp;#x7528;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x53EA;&amp;#x8981;&amp;#x5411;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x53D1;&amp;#x9001;&amp;#x9002;&amp;#x5F53;&amp;#x7684;&amp;#x547D;&amp;#x4EE4;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x89E6;&amp;#x53D1;&amp;#x4E00;&amp;#x6B21;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9001;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;&amp;#x5B8C;&amp;#x6210;&amp;#x6570;&amp;#x636E;&amp;#x4F20;&amp;#x9001;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x5C31;&amp;#x4F1A;&amp;#x53D1;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A;&amp;#x4E2D;&amp;#x65AD;&amp;#x901A;&amp;#x77E5;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x3002;&lt;br&gt;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#x4F20;&amp;#x9001;&amp;#x7684;&amp;#x662F;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x867D;&amp;#x7136;&amp;#x4E5F;&amp;#x5141;&amp;#x8BB8;&amp;#x4F20;&amp;#x9001;&amp;#x4E0D;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#x6247;&amp;#x533A;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;&amp;#x8FD9;&amp;#x4E2A;&amp;#x6BD4;&amp;#x8F83;&amp;#x4F4E;&amp;#x6548;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x78C1;&amp;#x5934;&amp;#x79FB;&amp;#x52A8;&amp;#x6162;&amp;#x3002;&lt;br&gt;&amp;#x8001;&amp;#x7684;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x4EC5;&amp;#x4EC5;&amp;#x652F;&amp;#x6301;&amp;#x201C;&amp;#x7B80;&amp;#x5355;&amp;#x201D;&amp;#x7684;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF1A;&amp;#x78C1;&amp;#x76D8;&amp;#x5FC5;&amp;#x987B;&amp;#x4E0E;RAM&amp;#x4E2D;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x5355;&amp;#x5143;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#x3002;&amp;#x4F46;&amp;#x662F;&amp;#x65B0;&amp;#x7684;&amp;#x78C1;&amp;#x76D8;&amp;#x63A7;&amp;#x5236;&amp;#x5668;&amp;#x652F;&amp;#x6301;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;&amp;#xFF08;scatter-gather&amp;#xFF09;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x78C1;&amp;#x76D8;&amp;#x53EF;&amp;#x4EE5;&amp;#x4E0E;&amp;#x4E00;&amp;#x4E9B;&amp;#x975E;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x533A;&amp;#x57DF;&amp;#x76F8;&amp;#x4E92;&amp;#x4F20;&amp;#x9001;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;br&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x652F;&amp;#x6301;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;DMA&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#x9A71;&amp;#x52A8;&amp;#x7A0B;&amp;#x5E8F;&amp;#x5FC5;&amp;#x987B;&amp;#x80FD;&amp;#x591F;&amp;#x5904;&amp;#x7406;&amp;#x79F0;&amp;#x4E3A;&amp;#x6BB5;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5B58;&amp;#x50A8;&amp;#x5355;&amp;#x5143;&amp;#xFF0C;&amp;#x4E00;&amp;#x6B21;&amp;#x5206;&amp;#x6563;&amp;#x805A;&amp;#x96C6;DMA&amp;#x53EF;&amp;#x4EE5;&amp;#x4F20;&amp;#x9001;&amp;#x51E0;&amp;#x4E2A;&amp;#x6BB5;&amp;#x3002;&lt;br&gt;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x6BB5;&amp;#x5728;RAM&amp;#x4E2D;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x9875;&amp;#x6846;&amp;#x6B63;&amp;#x597D;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x5E76;&amp;#x4E14;&amp;#x5728;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x4E5F;&amp;#x662F;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x901A;&amp;#x7528;&amp;#x5757;&amp;#x5C42;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x8FD9;&amp;#x79CD;&amp;#x5408;&amp;#x5E76;&amp;#x65B9;&amp;#x5F0F;&amp;#x4EA7;&amp;#x751F;&amp;#x7684;&amp;#x66F4;&amp;#x5927;&amp;#x7684;&amp;#x5185;&amp;#x5B58;&amp;#x533A;&amp;#x57DF;&amp;#x5C31;&amp;#x79F0;&amp;#x4E3A;&amp;#x7269;&amp;#x7406;&amp;#x6BB5;&amp;#x3002;&lt;br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="storage" scheme="http://yoursite.com/tags/storage/"/>
    
      <category term="kernel" scheme="http://yoursite.com/tags/kernel/"/>
    
  </entry>
  
  <entry>
    <title>flashcachegroup浅析</title>
    <link href="http://yoursite.com/2016/05/05/flashcachegroup/"/>
    <id>http://yoursite.com/2016/05/05/flashcachegroup/</id>
    <published>2016-05-05T08:02:35.000Z</published>
    <updated>2016-05-05T08:23:07.632Z</updated>
    
    <content type="html">&lt;h1 id=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;/a&gt;&amp;#x7B80;&amp;#x4ECB;&lt;/h1&gt;&lt;p&gt;flashcachegroup&amp;#x80FD;&amp;#x591F;&amp;#x4F7F;&amp;#x7528;&amp;#x4E00;&amp;#x5757;&amp;#x6216;&amp;#x591A;&amp;#x5757;ssd&amp;#x6765;&amp;#x7F13;&amp;#x5B58;&amp;#x4E00;&amp;#x7EC4;hdd&amp;#x786C;&amp;#x76D8;&amp;#xFF0C;&amp;#x786C;&amp;#x76D8;&amp;#x7EC4;&amp;#x80FD;&amp;#x591F;&amp;#x52A8;&amp;#x6001;&amp;#x589E;&amp;#x52A0;&amp;#x5220;&amp;#x9664;&amp;#x786C;&amp;#x76D8;&amp;#xFF0C;ssd&amp;#x7F13;&amp;#x5B58;&amp;#x80FD;&amp;#x591F;&amp;#x6574;&amp;#x4E2A;&amp;#x786C;&amp;#x76D8;&amp;#x7EC4;&amp;#x800C;&amp;#x4E0D;&amp;#x4EC5;&amp;#x4EC5;&amp;#x662F;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x3002;&lt;br&gt;&amp;#x5176;&amp;#x7ED3;&amp;#x6784;&amp;#x5982;&amp;#x4E0B;&amp;#xFF0C;&amp;#x53C2;&amp;#x8003;&amp;#x5B98;&amp;#x65B9;&amp;#x8BF4;&amp;#x660E;&lt;a href=&quot;https://github.com/lihuiba/flashcachegroup&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x501F;&amp;#x7528;&amp;#x4ECB;&amp;#x7ECD;&amp;#x91CC;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x56FE;&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/lihuiba/flashcachegroup&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x501F;&amp;#x7528;&amp;#x4ECB;&amp;#x7ECD;&amp;#x91CC;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x56FE;&lt;/a&gt;.&lt;br&gt;&lt;img src=&quot;/2016/05/05/flashcachegroup/fcg.png&quot; alt=&quot;fcg&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;1-&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot;&gt;&lt;a href=&quot;#1-&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot;&gt;&lt;/a&gt;1.&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&lt;/h1&gt;&lt;h2 id=&quot;1&amp;#xFF09;-&amp;#x5B89;&amp;#x88C5;flashcache&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;-&amp;#x5B89;&amp;#x88C5;flashcache&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09; &amp;#x5B89;&amp;#x88C5;flashcache&quot;&gt;&lt;/a&gt;1&amp;#xFF09; &amp;#x5B89;&amp;#x88C5;flashcache&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x9700;&amp;#x8981;&amp;#x5B89;&amp;#x88C5;flashcache&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git clone https://github.com/facebook/flashcache.git&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#cd flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5207;&amp;#x6362;&amp;#x5230;&amp;#x7A33;&amp;#x5B9A;&amp;#x7248;stable_v3.1.1&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git checkout stable_v3.1.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;flashcache&amp;#x7F16;&amp;#x8BD1;&amp;#x9700;&amp;#x8981;&amp;#x4F9D;&amp;#x8D56;KERNE_TREE&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#make KERNEL_TREE=/usr/src/linux-headers-3.10.11-openstack-amd64/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#make install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x52A0;&amp;#x8F7D;flashcache&amp;#x6A21;&amp;#x5757;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#modprobe flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#lsmod | grep flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;2&amp;#xFF09;&amp;#x4E0B;&amp;#x8F7D;fcg&quot;&gt;&lt;a href=&quot;#2&amp;#xFF09;&amp;#x4E0B;&amp;#x8F7D;fcg&quot; class=&quot;headerlink&quot; title=&quot;2&amp;#xFF09;&amp;#x4E0B;&amp;#x8F7D;fcg&quot;&gt;&lt;/a&gt;2&amp;#xFF09;&amp;#x4E0B;&amp;#x8F7D;fcg&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git clone https://github.com/lihuiba/flashcachegroup.git&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x8FDB;&amp;#x5165;&amp;#x76EE;&amp;#x5F55;,&amp;#x5207;&amp;#x6362;&amp;#x5230;v0.3.0&amp;#x7248;&amp;#x672C;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git checkout v0.3.0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x6267;&amp;#x884C;python setup.py install&lt;br&gt;&amp;#x5982;&amp;#x679C;&amp;#x62A5;&amp;#x9519;&amp;#x201C;ImportError: No module named setuptools&amp;#x201D;&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;&amp;#x7F3A;&amp;#x5C11;python-setuptools&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#apt-get install python-setuptools&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x6267;&amp;#x884C;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#python setup.py install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5B89;&amp;#x88C5;&amp;#x6210;&amp;#x529F;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;3&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;pydm&quot;&gt;&lt;a href=&quot;#3&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;pydm&quot; class=&quot;headerlink&quot; title=&quot;3&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;pydm&quot;&gt;&lt;/a&gt;3&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;pydm&lt;/h2&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;fcg create&amp;#x62A5;&amp;#x9519;&lt;br&gt;&amp;#x201C;ImportError: No module named pydm.dmsetup&amp;#x201D;&lt;br&gt;&amp;#x9700;&amp;#x8981;&amp;#x5B89;&amp;#x88C5;pydm&lt;br&gt;&amp;#x4F7F;&amp;#x7528;easy_install pydm&amp;#x5B89;&amp;#x88C5;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# easy_install pydm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Searching &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; pydm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Reading http://pypi.python.org/simple/pydm/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Best match: pydm 0.2.0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Downloading https://pypi.python.org/packages/&lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt;/p/pydm/pydm-0.2.0.tar.gz&lt;span class=&quot;comment&quot;&gt;#md5=cb2753aef529af7d21f49d4cdc4fa4ae&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Processing pydm-0.2.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Running pydm-0.2.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-8_yfei/pydm-0.2.0/egg-dist-tmp-pj5m9c&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;error: README.md: No such file or directory&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x5B89;&amp;#x88C5;&amp;#x8FD8;&amp;#x662F;&amp;#x4E0D;&amp;#x884C;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x628A;pydm&amp;#x5305;&amp;#x4E0B;&amp;#x8F7D;&amp;#x4E0B;&amp;#x6765;&amp;#xFF0C;&lt;br&gt;&amp;#x8FDB;&amp;#x5165;&amp;#x5230;pydm-0.2.0&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x5B89;&amp;#x88C5;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#python setup.py install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E5F;&amp;#x62A5;&amp;#x540C;&amp;#x6837;&amp;#x7684;&amp;#x9519;&amp;#x8BEF;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x786E;&amp;#x5B9E;&amp;#x6CA1;&amp;#x6709;README.md&amp;#x8FD9;&amp;#x4E2A;&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&amp;#x89E3;&amp;#x51B3;&amp;#x529E;&amp;#x6CD5;&amp;#x662F;&amp;#x76F4;&amp;#x63A5;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x7A7A;&amp;#x7684;README.md&amp;#x6587;&amp;#x4EF6;&amp;#xFF0C;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5B89;&amp;#x88C5;&amp;#xFF0C;&amp;#x6210;&amp;#x529F;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;4&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;eventlet&quot;&gt;&lt;a href=&quot;#4&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;eventlet&quot; class=&quot;headerlink&quot; title=&quot;4&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;eventlet&quot;&gt;&lt;/a&gt;4&amp;#xFF09;&amp;#x7F3A;&amp;#x5C11;eventlet&lt;/h1&gt;&lt;p&gt;&amp;#x518D;&amp;#x6267;&amp;#x884C;fcg create&amp;#x65F6;&amp;#x62A5;&amp;#x9519;&amp;#x201C;ImportError: No module named eventlet.green&amp;#x201D;&lt;br&gt;&amp;#x5B89;&amp;#x88C5;eventlet&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#apt-get install python-eventlet&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;5&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;fcg&quot;&gt;&lt;a href=&quot;#5&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;fcg&quot; class=&quot;headerlink&quot; title=&quot;5&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;fcg&quot;&gt;&lt;/a&gt;5&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;fcg&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg create -g group1 -c /dev/vde&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg add -g group1 -d /dev/vdb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg add -g group1 -d /dev/vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4E0D;&amp;#x8FC7;fcg&amp;#x5220;&amp;#x9664;disk&amp;#xFF0C;&amp;#x5220;&amp;#x9664;group&amp;#xFF0C;&amp;#x66FF;&amp;#x6362;ssd&amp;#x90FD;&amp;#x6709;bug&amp;#xFF0C;&amp;#x4E0D;&amp;#x80FD;&amp;#x6267;&amp;#x884C;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;2-flashcachegroup&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x673A;&amp;#x5236;&quot;&gt;&lt;a href=&quot;#2-flashcachegroup&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x673A;&amp;#x5236;&quot; class=&quot;headerlink&quot; title=&quot;2. flashcachegroup&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x673A;&amp;#x5236;&quot;&gt;&lt;/a&gt;2. flashcachegroup&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x673A;&amp;#x5236;&lt;/h1&gt;&lt;p&gt;fcg&amp;#x7684;&amp;#x5B9E;&amp;#x73B0;&amp;#x633A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5C01;&amp;#x88C5;&amp;#x4E86;flashcache&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x6574;&amp;#x4F53;&amp;#x7ED3;&amp;#x6784;&amp;#x4E0A;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;hdd&amp;#x7684;group&amp;#x548C;&amp;#x4E00;&amp;#x4E2A;ssd&amp;#x7684;group&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E2A;group&amp;#x53EF;&amp;#x4EE5;&amp;#x5305;&amp;#x542B;&amp;#x591A;&amp;#x5757;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E2A;group&amp;#x91CC;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x90FD;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;device mapper&amp;#x7684;linear&amp;#x7EBF;&amp;#x6027;&amp;#x6620;&amp;#x5C04;&amp;#x5EFA;&amp;#x6210;&amp;#x7684;&amp;#x3002;&lt;br&gt;&lt;br&gt;hdd&amp;#x7684;group&amp;#x548C;ssd&amp;#x7684;group&amp;#x90FD;&amp;#x662F;&amp;#x4E24;&amp;#x4E2A;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x56E0;&amp;#x4E3A;flashcache&amp;#x7684;&amp;#x673A;&amp;#x5236;&amp;#x662F;&amp;#x628A;&amp;#x4E00;&amp;#x4E2A;hdd&amp;#x548C;&amp;#x4E00;&amp;#x4E2A;ssd&amp;#x505A;&amp;#x6210;&amp;#x4E00;&amp;#x4E2A;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x4E00;&amp;#x65E6;&amp;#x521B;&amp;#x5EFA;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5927;&amp;#x5C0F;&amp;#x5C31;&amp;#x4E0D;&amp;#x80FD;&amp;#x505A;&amp;#x4FEE;&amp;#x6539;&amp;#x4E86;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x4E3A;&amp;#x4E86;&amp;#x80FD;&amp;#x591F;&amp;#x589E;&amp;#x52A0;&amp;#x78C1;&amp;#x76D8;&amp;#xFF0C;hdd group&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1PB&amp;#xFF08;&amp;#x76EE;&amp;#x524D;&amp;#x6765;&amp;#x770B;&amp;#xFF0C;1PB&amp;#x4E5F;&amp;#x8DB3;&amp;#x591F;&amp;#x4E86;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8FD8;&amp;#x6709;&amp;#x9700;&amp;#x6C42;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x505A;&amp;#x4FEE;&amp;#x6539;&amp;#xFF09;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;hdd group&amp;#x91CC;&amp;#x7684;hdd&amp;#x5927;&amp;#x5C0F;&amp;#x4E0D;&amp;#x8DB3;1PB&amp;#xFF0C;&amp;#x5C31;&amp;#x4F7F;&amp;#x7528;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x6837;&amp;#x7EBF;&amp;#x6027;&amp;#x6620;&amp;#x5C04;&amp;#xFF0C;error&amp;#x8BBE;&amp;#x5907;&amp;#x8FD9;&amp;#x6BB5;&amp;#x7A7A;&amp;#x95F4;&amp;#x662F;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x7ED9;&amp;#x7528;&amp;#x6237;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x8BFB;&amp;#x5199;&amp;#x5230;&amp;#x8FD9;&amp;#x6BB5;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6709;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&lt;br&gt;&lt;br&gt;ssd group&amp;#x5C31;&amp;#x4E0D;&amp;#x80FD;&amp;#x91C7;&amp;#x7528;hdd group&amp;#x7684;&amp;#x65B9;&amp;#x6CD5;&amp;#x4E86;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;flashcache&amp;#x4E2D;ssd&amp;#x662F;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BBE;&amp;#x5907;&amp;#x4F5C;&amp;#x7F13;&amp;#x5B58;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#xFF0C;&amp;#x6574;&amp;#x4E2A;ssd&amp;#x90FD;&amp;#x4F1A;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x518D;&amp;#x586B;&amp;#x5145;error&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x8BA4;&amp;#x4E3A;&amp;#x8FD9;&amp;#x4E2A;ssd&amp;#x574F;&amp;#x4E86;&amp;#x3002;&lt;br&gt;ssd group&amp;#x4E00;&amp;#x65E6;&amp;#x786E;&amp;#x5B9A;&amp;#x597D;&amp;#x4E86;&amp;#x6709;&amp;#x51E0;&amp;#x5757;ssd&amp;#x7EC4;&amp;#x6210;&amp;#xFF0C;&amp;#x540E;&amp;#x9762;&amp;#x5C31;&amp;#x4E0D;&amp;#x80FD;&amp;#x518D;&amp;#x589E;&amp;#x52A0;&amp;#x6216;&amp;#x5220;&amp;#x9664;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;group&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;group&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;group&quot;&gt;&lt;/a&gt;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;group&lt;/h2&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg create -g &amp;lt;group&amp;gt; -c &amp;lt;ssd device&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x64CD;&amp;#x4F5C;&amp;#x5C31;&amp;#x662F;&amp;#x8C03;&amp;#x7528;flashcache_create&amp;#x4EE5;hdd group&amp;#x548C;ssd device&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&lt;br&gt;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#x591A;&amp;#x5757;ssd device&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5148;&amp;#x628A;&amp;#x8FD9;&amp;#x51E0;&amp;#x4E2A;ssd&amp;#x68C0;&amp;#x67E5;device mapper&amp;#x8BBE;&amp;#x5907;ssd group&amp;#xFF0C;&amp;#x518D;&amp;#x4EE5;hdd group&amp;#x548C;ssd group&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x521B;&amp;#x5EFA;&amp;#x51FA;&amp;#x6765;&amp;#x7684;hdd group&amp;#x5C31;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;error&amp;#x8BBE;&amp;#x5907;&amp;#x6620;&amp;#x5C04;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD8;&amp;#x6CA1;&amp;#x6709;&amp;#x4EFB;&amp;#x4F55;hdd&amp;#x52A0;&amp;#x5165;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;2&amp;#xFF09;&amp;#x6DFB;&amp;#x52A0;&amp;#x78C1;&amp;#x76D8;&quot;&gt;&lt;a href=&quot;#2&amp;#xFF09;&amp;#x6DFB;&amp;#x52A0;&amp;#x78C1;&amp;#x76D8;&quot; class=&quot;headerlink&quot; title=&quot;2&amp;#xFF09;&amp;#x6DFB;&amp;#x52A0;&amp;#x78C1;&amp;#x76D8;&quot;&gt;&lt;/a&gt;2&amp;#xFF09;&amp;#x6DFB;&amp;#x52A0;&amp;#x78C1;&amp;#x76D8;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg add -g &amp;lt;group&amp;gt; -d &amp;lt;hdd device&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x9879;&amp;#x64CD;&amp;#x4F5C;&amp;#x5C31;&amp;#x662F;&amp;#x4FEE;&amp;#x6539;hdd group&amp;#x8FD9;&amp;#x4E2A;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;&amp;#x6309;&amp;#x7167;&amp;#x5730;&amp;#x5740;&amp;#x7A7A;&amp;#x95F4;&amp;#x6620;&amp;#x5C04;&amp;#x5230;&amp;#x7ED9;&amp;#x5B9A;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x78C1;&amp;#x76D8;&amp;#x4E0A;&amp;#x3002;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4ECD;&amp;#x7136;&amp;#x4EE5;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5728;hdd group&amp;#x8FD9;&amp;#x4E2A;&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x4F7F;&amp;#x7528;device mapper&amp;#x7684;linear&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x4E00;&amp;#x4E2A;&amp;#x548C;&amp;#x7ED9;&amp;#x5B9A;&amp;#x7269;&amp;#x7406;&amp;#x78C1;&amp;#x76D8;&amp;#xFF08;&amp;#x6BD4;&amp;#x5982;/dev/sdb&amp;#xFF09;&amp;#x5927;&amp;#x5C0F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;cdb&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x76F8;&amp;#x5F53;&amp;#x4E8E;cdb&amp;#x548C;sdb&amp;#x4E00;&amp;#x4E00;&amp;#x5BF9;&amp;#x5E94;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;3&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x78C1;&amp;#x76D8;&quot;&gt;&lt;a href=&quot;#3&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x78C1;&amp;#x76D8;&quot; class=&quot;headerlink&quot; title=&quot;3&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x78C1;&amp;#x76D8;&quot;&gt;&lt;/a&gt;3&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x78C1;&amp;#x76D8;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#fcg remove -g &amp;lt;group&amp;gt; -d &amp;lt;disk&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x5220;&amp;#x9664;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E5F;&amp;#x662F;&amp;#x4FEE;&amp;#x6539;hdd group&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;&amp;#x5C06;hdd group&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&lt;disk&gt;&amp;#x7684;&amp;#x90A3;&amp;#x6BB5;&amp;#x7A7A;&amp;#x95F4;&amp;#x66FF;&amp;#x6362;&amp;#x6210;error&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x8FD8;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;flashcache_invalidate&amp;#x5C06;&amp;#x8FD9;&amp;#x4E2A;disk&amp;#x7F13;&amp;#x5B58;&amp;#x5728;ssd&amp;#x4E2D;&amp;#x7684;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x7ED9;&amp;#x5931;&amp;#x6548;&amp;#x6389;.&lt;br&gt;&lt;br&gt;flashcache_invalidate&amp;#x8FD9;&amp;#x9879;&amp;#x64CD;&amp;#x4F5C;&amp;#x662F;&amp;#x4F5C;&amp;#x8005;&amp;#x4FEE;&amp;#x6539;flashcache&amp;#x4EE3;&amp;#x7801;&amp;#x589E;&amp;#x52A0;&amp;#x7684;&amp;#xFF0C;&amp;#x539F;&amp;#x7248;&amp;#x7684;&amp;#x662F;&amp;#x6CA1;&amp;#x6709;&amp;#x8FD9;&amp;#x4E2A;&amp;#x547D;&amp;#x4EE4;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x53C2;&amp;#x89C1;&lt;a href=&quot;https://github.com/anzigly/flashcache-invalid&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/anzigly/flashcache-invalid&lt;/a&gt;&lt;/disk&gt;&lt;/p&gt;
&lt;h2 id=&quot;4&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x574F;&amp;#x7684;ssd&quot;&gt;&lt;a href=&quot;#4&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x574F;&amp;#x7684;ssd&quot; class=&quot;headerlink&quot; title=&quot;4&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x574F;&amp;#x7684;ssd&quot;&gt;&lt;/a&gt;4&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x574F;&amp;#x7684;ssd&lt;/h2&gt;&lt;p&gt;&amp;#x66FF;&amp;#x6362;ssd&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x662F;&amp;#x5148;&amp;#x4FDD;&amp;#x5B58;&amp;#x6240;&amp;#x6709;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;destroy&amp;#x6389;&amp;#x539F;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6362;&amp;#x6210;&amp;#x65B0;&amp;#x7684;ssd&amp;#xFF0C;&amp;#x518D;&amp;#x4F7F;&amp;#x7528;&amp;#x4FDD;&amp;#x5B58;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x5173;&amp;#x7CFB;&amp;#x91CD;&amp;#x65B0;&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5BF9;&amp;#x5E94;writethrough&amp;#x548C;writearoud&amp;#x53EF;&amp;#x4EE5;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x5BF9;&amp;#x5E94;writeback&amp;#x6765;&amp;#x8BF4;&amp;#xFF0C;ssd&amp;#x574F;&amp;#x4E86;&amp;#xFF0C;&amp;#x6570;&amp;#x636E;&amp;#x4E5F;&amp;#x4E22;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x5DF2;&amp;#x7ECF;&amp;#x6570;&amp;#x636E;&amp;#x4E0D;&amp;#x4E00;&amp;#x81F4;&amp;#x4E86;&amp;#xFF0C;&amp;#x5373;&amp;#x4F7F;&amp;#x66FF;&amp;#x6362;&amp;#x4E86;ssd&amp;#x4E5F;&amp;#x4E0D;&amp;#x80FD;&amp;#x633D;&amp;#x56DE;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;group&quot;&gt;&lt;a href=&quot;#5&amp;#xFF09;&amp;#x5220;&amp;#x9664;group&quot; class=&quot;headerlink&quot; title=&quot;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;group&quot;&gt;&lt;/a&gt;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;group&lt;/h2&gt;&lt;p&gt;&amp;#x5220;&amp;#x9664;group&amp;#x5C31;&amp;#x662F;flashcache_destroy&amp;#x5220;&amp;#x9664;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x4EE5;&amp;#x53CA;&amp;#x6E05;&amp;#x7406;&amp;#x76F8;&amp;#x5173;&amp;#x7684;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;3-&amp;#x4EFF;fcg&amp;#x4F7F;&amp;#x7528;flashcache&quot;&gt;&lt;a href=&quot;#3-&amp;#x4EFF;fcg&amp;#x4F7F;&amp;#x7528;flashcache&quot; class=&quot;headerlink&quot; title=&quot;3.&amp;#x4EFF;fcg&amp;#x4F7F;&amp;#x7528;flashcache&quot;&gt;&lt;/a&gt;3.&amp;#x4EFF;fcg&amp;#x4F7F;&amp;#x7528;flashcache&lt;/h1&gt;&lt;p&gt;&amp;#x5176;&amp;#x5B9E;fcg&amp;#x5B9E;&amp;#x73B0;&amp;#x7684;&amp;#x529F;&amp;#x80FD;&amp;#x4E5F;&amp;#x6BD4;&amp;#x8F83;&amp;#x7B80;&amp;#x5355;&amp;#xFF0C;&amp;#x800C;&amp;#x4E14;&amp;#x4EE3;&amp;#x7801;&amp;#x6709;bug&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x8003;&amp;#x8651;&amp;#x81EA;&amp;#x5DF1;&amp;#x5B9E;&amp;#x73B0;&amp;#x4E00;&amp;#x4E2A;&amp;#x7B80;&amp;#x5355;&amp;#x7684;&amp;#xFF0C;&amp;#x5148;&amp;#x7528;&amp;#x547D;&amp;#x4EE4;&amp;#x5B9E;&amp;#x73B0;&amp;#x6574;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;1PB&amp;#x7684;linear&amp;#x903B;&amp;#x8F91;&amp;#x76D8;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7269;&amp;#x7406;&amp;#x76D8;-dev-vdb&amp;#xFF0C;-dev-vdc&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4F7F;&amp;#x7528;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;1PB&amp;#x7684;linear&amp;#x903B;&amp;#x8F91;&amp;#x76D8;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7269;&amp;#x7406;&amp;#x76D8;-dev-vdb&amp;#xFF0C;-dev-vdc&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4F7F;&amp;#x7528;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;1PB&amp;#x7684;linear&amp;#x903B;&amp;#x8F91;&amp;#x76D8;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7269;&amp;#x7406;&amp;#x76D8;/dev/vdb&amp;#xFF0C;/dev/vdc&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4F7F;&amp;#x7528;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&quot;&gt;&lt;/a&gt;1&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;1PB&amp;#x7684;linear&amp;#x903B;&amp;#x8F91;&amp;#x76D8;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7269;&amp;#x7406;&amp;#x76D8;/dev/vdb&amp;#xFF0C;/dev/vdc&amp;#xFF0C;&amp;#x5269;&amp;#x4E0B;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4F7F;&amp;#x7528;error&amp;#x8BBE;&amp;#x5907;&amp;#x586B;&amp;#x5145;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# dmsetup create hdd_group &amp;lt;&amp;lt;EOF&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;0 104857600 linear /dev/vdb 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 104857600 linear /dev/vdc 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209715200 2198813540352 error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;EOF&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;2-&amp;#x4F7F;&amp;#x7528;-dev-vde&amp;#x548C;hdd-group&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&quot;&gt;&lt;a href=&quot;#2-&amp;#x4F7F;&amp;#x7528;-dev-vde&amp;#x548C;hdd-group&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&quot; class=&quot;headerlink&quot; title=&quot;2)&amp;#x4F7F;&amp;#x7528;/dev/vde&amp;#x548C;hdd_group&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&quot;&gt;&lt;/a&gt;2)&amp;#x4F7F;&amp;#x7528;/dev/vde&amp;#x548C;hdd_group&amp;#x521B;&amp;#x5EFA;flashcache&amp;#x8BBE;&amp;#x5907;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# flashcache_create -p back fcdev1 /dev/vde /dev/mapper/hdd_group&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cachedev fcdev1, ssd_devname /dev/vde, disk_devname /dev/mapper/hdd_group cache mode WRITE_BACK&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;block_size 8, md_block_size 8, cache_size 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Flashcache metadata will use 55MB of your 496MB main memory&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;3-&amp;#x5728;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x4F7F;&amp;#x7528;linear&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x4E24;&amp;#x5757;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&quot;&gt;&lt;a href=&quot;#3-&amp;#x5728;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x4F7F;&amp;#x7528;linear&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x4E24;&amp;#x5757;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&quot; class=&quot;headerlink&quot; title=&quot;3)&amp;#x5728;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x4F7F;&amp;#x7528;linear&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x4E24;&amp;#x5757;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&quot;&gt;&lt;/a&gt;3)&amp;#x5728;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x4F7F;&amp;#x7528;linear&amp;#x6620;&amp;#x5C04;&amp;#x51FA;&amp;#x4E24;&amp;#x5757;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 104857600 linear /dev/mapper/fcdev1 0&amp;quot;|dmsetup create cached_vdb&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 104857600 linear /dev/mapper/fcdev1 104857600&amp;quot;|dmsetup create cached_vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# dmsetup table&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cached_vdc: 0 104857600 linear 252:1 104857600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cached_vdb: 0 104857600 linear 252:1 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdd_group: 0 104857600 linear 254:16 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdd_group: 104857600 104857600 linear 254:32 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;hdd_group: 209715200 2198813540352 error&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fcdev1: 0 2199023255552 flashcache conf:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; ssd dev (/dev/vde), disk dev (/dev/mapper/hdd_group) cache mode(WRITE_BACK)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; capacity(10198M), associativity(512), data block size(4K) metadata block size(4096b)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; disk assoc(256K)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; skip sequential thresh(0K)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; total blocks(2610688), cached blocks(166), cache percent(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; dirty blocks(0), dirty percent(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; nr_queued(0)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Size Hist: 4096:258&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;4-&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;-dev-vdf-10G&quot;&gt;&lt;a href=&quot;#4-&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;-dev-vdf-10G&quot; class=&quot;headerlink&quot; title=&quot;4)&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;/dev/vdf,10G&quot;&gt;&lt;/a&gt;4)&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;/dev/vdf,10G&lt;/h2&gt;&lt;p&gt;&amp;#x6DFB;&amp;#x52A0;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x4FEE;&amp;#x6539;hdd_group&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;&amp;#x52A0;&amp;#x5230;&amp;#x4E4B;&amp;#x524D;&amp;#x7684;&amp;#x786C;&amp;#x76D8;&amp;#x4E4B;&amp;#x540E;&lt;br&gt;&amp;#x5907;&amp;#x4EFD;hdd_group&amp;#x7684;dm&amp;#x6620;&amp;#x5C04;&amp;#x8868;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#dmsetup table hdd_group &amp;gt;hdd_group.dm&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x51C6;&amp;#x5907;&amp;#x65B0;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;new.dm&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0 104857600 linear 254:16 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 104857600 linear 254:32 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209715200 20971520 linear /dev/vdf 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230686720 2198792568832 error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6302;&amp;#x8D77;hdd_group&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x65B0;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#x66FF;&amp;#x6362;&amp;#x540E;&amp;#x518D;resume&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#dmsetup suspend hdd_group&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#cat new.dm | dmsetup reload hdd_group&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#dmsetup resume hdd_group&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;hdd_group&amp;#x4E0A;&amp;#x521B;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;&amp;#x540C;&amp;#x7B49;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;linear&amp;#x8BBE;&amp;#x5907;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# echo &amp;quot;0 20971520 linear /dev/mapper/hdd_group 209715200&amp;quot;|dmsetup create cached_vdf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&quot;&gt;&lt;a href=&quot;#5&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&quot; class=&quot;headerlink&quot; title=&quot;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&quot;&gt;&lt;/a&gt;5&amp;#xFF09;&amp;#x5220;&amp;#x9664;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&lt;/h2&gt;&lt;p&gt;&amp;#x4E00;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x628A;&amp;#x8FD9;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x5728;ssd&amp;#x4E2D;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7F13;&amp;#x5B58;&amp;#x6570;&amp;#x636E;&amp;#x7ED9;&amp;#x5931;&amp;#x6548;&amp;#x6389;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x5931;&amp;#x6548;&amp;#xFF0C;&amp;#x5728;&amp;#x5237;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;io error&amp;#x5E76;&amp;#x4E0D;&amp;#x4F1A;&amp;#x4F7F;&amp;#x8FD9;&amp;#x4E2A;flashcache&amp;#x8BBE;&amp;#x5907;&amp;#x4E0D;&amp;#x53EF;&amp;#x7528;&amp;#xFF0C;&amp;#x53EA;&amp;#x662F;&amp;#x628A;cache&amp;#x91CC;&amp;#x9762;&amp;#x5BF9;&amp;#x5E94;&amp;#x5757;pending&amp;#x7684;io&amp;#x90FD;&amp;#x5E72;&amp;#x6389;&amp;#xFF0C;&amp;#x589E;&amp;#x52A0;&amp;#x70B9;&amp;#x9519;&amp;#x8BEF;&amp;#x7EDF;&amp;#x8BA1;&amp;#x503C;&amp;#xFF0C;&amp;#x5176;&amp;#x4ED6;&amp;#x5565;&amp;#x4E5F;&amp;#x6CA1;&amp;#x5E72;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x53E6;&amp;#x4E00;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;dm zero&amp;#x8BBE;&amp;#x5907;&amp;#x66FF;&amp;#x6362;&amp;#x8FD9;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5237;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;io&amp;#x62A5;&amp;#x9519;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x8BDD;&amp;#xFF0C;&amp;#x65B0;&amp;#x52A0;&amp;#x786C;&amp;#x76D8;&amp;#x5C31;&amp;#x53EA;&amp;#x80FD;&amp;#x5F80;&amp;#x540E;&amp;#x6DFB;&amp;#x52A0;&amp;#xFF0C;1PB&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x6309;&amp;#x6BCF;&amp;#x5757;&amp;#x76D8;2TB&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x653E;50&amp;#x4E2A;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x771F;&amp;#x5230;&amp;#x4E86;&amp;#x4E0D;&amp;#x80FD;&amp;#x518D;&amp;#x653E;&amp;#x65B0;&amp;#x76D8;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#xFF0C;&amp;#x524D;&amp;#x9762;&amp;#x574F;&amp;#x76D8;&amp;#x6240;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7F13;&amp;#x5B58;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x4E5F;&amp;#x65E9;&amp;#x5DF2;&amp;#x7ECF;&amp;#x5237;&amp;#x4E0B;&amp;#x53BB;&amp;#x4E86;&amp;#xFF08;&amp;#x5237;&amp;#x5230;zero&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;&amp;#x524D;&amp;#x9762;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x56E0;&amp;#x4E3A;flashcache&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#x63A7;&amp;#x5236;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x5237;&amp;#x7684;&amp;#x673A;&amp;#x5236;&amp;#xFF1A;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x6BCF;&amp;#x4E2A;set&amp;#x91CC;&amp;#x7684;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x8D85;&amp;#x8FC7;&amp;#x9608;&amp;#x503C;&amp;#x65F6;&amp;#x5C31;&amp;#x4F1A;&amp;#x5237;&amp;#xFF1B;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x8FC7;&amp;#x671F;&amp;#x65F6;&amp;#x95F4;(idle)&amp;#x8D85;&amp;#x8FC7;&amp;#x9608;&amp;#x503C;&amp;#xFF08;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;15&amp;#x5206;&amp;#x949F;&amp;#x8FC7;&amp;#x671F;&amp;#xFF09;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5237;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;br&gt;&amp;#x56E0;&amp;#x4E3A;flashcache&amp;#x6709;&amp;#x4E24;&amp;#x4E2A;&amp;#x63A7;&amp;#x5236;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x5237;&amp;#x7684;&amp;#x673A;&amp;#x5236;&amp;#xFF1A;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x6BCF;&amp;#x4E2A;set&amp;#x91CC;&amp;#x7684;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x8D85;&amp;#x8FC7;&amp;#x9608;&amp;#x503C;&amp;#x65F6;&amp;#x5C31;&amp;#x4F1A;&amp;#x5237;&amp;#xFF1B;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x662F;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x8FC7;&amp;#x671F;&amp;#x65F6;&amp;#x95F4;(idle)&amp;#x8D85;&amp;#x8FC7;&amp;#x9608;&amp;#x503C;&amp;#xFF08;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;15&amp;#x5206;&amp;#x949F;&amp;#x8FC7;&amp;#x671F;&amp;#xFF09;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5237;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x5237;&amp;#x810F;&amp;#x6570;&amp;#x636E;&amp;#x7684;&amp;#x65F6;&amp;#x673A;&amp;#x5206;&amp;#x522B;&amp;#x5BF9;&amp;#x5E94;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#xFF1A;dev.flashcache.\&lt;cachedev&gt;.dirty_thresh_pct&amp;#xFF0C;dev.flashcache.&lt;cachedev&gt;.fallow_delay&amp;#x3002;&lt;br&gt;&amp;#x5177;&amp;#x4F53;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x7684;&amp;#x89E3;&amp;#x91CA;&amp;#x53C2;&amp;#x8003;&amp;#x5B98;&amp;#x65B9;&amp;#x8BF4;&amp;#x660E;&lt;a href=&quot;https://github.com/facebook/flashcache/blob/master/doc/flashcache-sa-guide.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/facebook/flashcache/blob/master/doc/flashcache-sa-guide.txt&lt;/a&gt;&lt;/cachedev&gt;&lt;/cachedev&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5B9E;&amp;#x9645;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;cached_vdb&amp;#x5EFA;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x6302;&amp;#x8F7D;&amp;#x5230;&amp;#x672C;&amp;#x5730;&amp;#xFF0C;&amp;#x542F;&amp;#x52A8;mysql&amp;#xFF0C;&amp;#x5728;&amp;#x8FD9;&amp;#x5757;&amp;#x76D8;&amp;#x4E0A;&amp;#x8DD1;sysbench&amp;#xFF0C;&amp;#x8D1F;&amp;#x8F7D;&amp;#x4E0D;&amp;#x7528;&amp;#x5F88;&amp;#x9AD8;&amp;#x3002;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x5BF9;cached_vdc&amp;#x7528;fio&amp;#x5199;&amp;#x4E00;&amp;#x6BB5;&amp;#x65F6;&amp;#x95F4;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x540E;&amp;#x505C;&amp;#x6B62;&amp;#x3002;&lt;br&gt;&amp;#x8FD9;&amp;#x65F6;&amp;#x518D;&amp;#x5220;&amp;#x9664;&amp;#x7269;&amp;#x7406;&amp;#x76D8;vdc&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;dm zero&amp;#x8BBE;&amp;#x5907;&amp;#x66FF;&amp;#x6362;&amp;#x4E4B;&amp;#x524D;vdc&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x89C2;&amp;#x5BDF;cached_vdb&amp;#x4E0A;&amp;#x7684;mysql&amp;#xFF0C;sysbench&amp;#x662F;&amp;#x5426;&amp;#x6B63;&amp;#x5E38;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x66FF;&amp;#x6362;&amp;#x6210;zero&amp;#x8BBE;&amp;#x5907;&amp;#x65E0;&amp;#x5F71;&amp;#x54CD;&amp;#xFF0C;&amp;#x66FF;&amp;#x6362;&amp;#x6210;error&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;sysbench&amp;#x6D4B;&amp;#x8BD5;&amp;#x7684;&amp;#x54CD;&amp;#x5E94;&amp;#x65F6;&amp;#x95F4;&amp;#x4F1A;&amp;#x98D9;&amp;#x5347;&amp;#xFF08;&amp;#x7531;&amp;#x539F;&amp;#x6765;&amp;#x7684;10ms&amp;#x5DE6;&amp;#x53F3;&amp;#x6DA8;&amp;#x5230;&amp;#x51E0;&amp;#x767E;&amp;#x751A;&amp;#x81F3;1000&amp;#x591A;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5728;&amp;#x8FD9;&amp;#x8303;&amp;#x56F4;&amp;#x5185;&amp;#x6CE2;&amp;#x52A8;&amp;#xFF09;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;mysql&amp;#x548C;sysbench&amp;#x90FD;&amp;#x6CA1;&amp;#x6709;&amp;#x51FA;&amp;#x9519;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x4E0B;&amp;#x9762;&amp;#x662F;&amp;#x5220;&amp;#x9664;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#x6B65;&amp;#x9AA4;&amp;#xFF1A;&lt;br&gt;&lt;br&gt;&amp;#x6BD4;&amp;#x5982;&amp;#x9700;&amp;#x8981;&amp;#x5220;&amp;#x9664;&amp;#x7684;&amp;#x76D8;&amp;#x662F;/dev/vdc&amp;#xFF0C;&amp;#x5148;&amp;#x53D6;&amp;#x51FA;cached_vdc&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF08;&amp;#x6700;&amp;#x540E;&amp;#x8981;&amp;#x5220;&amp;#x6389;cached_vdc&amp;#x8FD9;&amp;#x5757;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0 104857600 linear 252:1 104857600&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#x5BF9;&amp;#x5E94;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;start offset linear device cachedev_offset&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x6839;&amp;#x636E;&amp;#x4EE5;&amp;#x4E0A;&amp;#x4FE1;&amp;#x606F;&amp;#x5728;hdd_group&amp;#x4E2D;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#x627E;&amp;#x5230;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x7269;&amp;#x7406;&amp;#x76D8;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;hdd_group&amp;#x4E2D;&amp;#x628A;/dev/vdc&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;&amp;#x90A3;&amp;#x6BB5;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#x66FF;&amp;#x6362;&amp;#x6210;error&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&lt;br&gt;&amp;#x66FF;&amp;#x6362;&amp;#x524D;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0 104857600 linear 254:16 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 104857600 linear 254:32 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209715200 20971520 linear 254:80 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230686720 2198792568832 error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x66FF;&amp;#x6362;&amp;#x540E;&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#x4E3A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;0 104857600 linear 254:16 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104857600 104857600 zero&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;209715200 20971520 linear 254:80 0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;230686720 2198792568832 error&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;6&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x4E00;&amp;#x5757;&amp;#x7269;&amp;#x7406;&amp;#x76D8;&quot;&gt;&lt;a href=&quot;#6&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x4E00;&amp;#x5757;&amp;#x7269;&amp;#x7406;&amp;#x76D8;&quot; class=&quot;headerlink&quot; title=&quot;6&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x4E00;&amp;#x5757;&amp;#x7269;&amp;#x7406;&amp;#x76D8;&quot;&gt;&lt;/a&gt;6&amp;#xFF09;&amp;#x66FF;&amp;#x6362;&amp;#x4E00;&amp;#x5757;&amp;#x7269;&amp;#x7406;&amp;#x76D8;&lt;/h2&gt;&lt;p&gt;&amp;#x5148;&amp;#x5220;&amp;#x9664;&amp;#x5F85;&amp;#x66FF;&amp;#x6362;&amp;#x7684;&amp;#x76D8;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x4F7F;&amp;#x7528;&amp;#x65B0;&amp;#x7684;&amp;#x76D8;&amp;#x66FF;&amp;#x6362;&amp;#x65E7;&amp;#x7684;&amp;#x76D8;&amp;#xFF0C;&amp;#x5373;&amp;#x4FEE;&amp;#x6539;hdd_group&amp;#x7684;&amp;#x6620;&amp;#x5C04;&amp;#x8868;&amp;#xFF0C;&amp;#x4E0D;&amp;#x8FC7;&amp;#x65B0;&amp;#x7684;&amp;#x76D8;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#x4E0D;&amp;#x80FD;&amp;#x5927;&amp;#x4E8E;&amp;#x65E7;&amp;#x76D8;&amp;#xFF0C;&amp;#x4E0D;&amp;#x7136;&amp;#x5C31;&amp;#x53EA;&amp;#x80FD;&amp;#x6620;&amp;#x5C04;&amp;#x65E7;&amp;#x76D8;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x5927;&amp;#x5C0F;&amp;#x3002;&lt;br&gt;&amp;#x5982;&amp;#x679C;&amp;#x65B0;&amp;#x76D8;&amp;#x5C0F;&amp;#x4E8E;&amp;#x65E7;&amp;#x76D8;&amp;#x7684;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x66FF;&amp;#x6362;&amp;#x540E;&amp;#x7684;hdd_group&amp;#x4E2D;&amp;#x95F4;&amp;#x5C31;&amp;#x4F1A;&amp;#x6709;&amp;#x7A7A;&amp;#x6D1E;&amp;#xFF0C;&amp;#x4E0D;&amp;#x4FBF;&amp;#x4E8E;&amp;#x7BA1;&amp;#x7406;&amp;#x3002;&lt;br&gt;&amp;#x6240;&amp;#x4EE5;&amp;#x6700;&amp;#x597D;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;&amp;#x76F8;&amp;#x540C;&amp;#x5BB9;&amp;#x91CF;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x76D8;&amp;#x8FDB;&amp;#x884C;&amp;#x66FF;&amp;#x6362;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;/a&gt;&amp;#x7B80;&amp;#x4ECB;&lt;/h1&gt;&lt;p&gt;flashcachegroup&amp;#x80FD;&amp;#x591F;&amp;#x4F7F;&amp;#x7528;&amp;#x4E00;&amp;#x5757;&amp;#x6216;&amp;#x591A;&amp;#x5757;ssd&amp;#x6765;&amp;#x7F13;&amp;#x5B58;&amp;#x4E00;&amp;#x7EC4;hdd&amp;#x786C;&amp;#x76D8;&amp;#xFF0C;&amp;#x786C;&amp;#x76D8;&amp;#x7EC4;&amp;#x80FD;&amp;#x591F;&amp;#x52A8;&amp;#x6001;&amp;#x589E;&amp;#x52A0;&amp;#x5220;&amp;#x9664;&amp;#x786C;&amp;#x76D8;&amp;#xFF0C;ssd&amp;#x7F13;&amp;#x5B58;&amp;#x80FD;&amp;#x591F;&amp;#x6574;&amp;#x4E2A;&amp;#x786C;&amp;#x76D8;&amp;#x7EC4;&amp;#x800C;&amp;#x4E0D;&amp;#x4EC5;&amp;#x4EC5;&amp;#x662F;&amp;#x4E00;&amp;#x5757;&amp;#x786C;&amp;#x76D8;&amp;#x3002;&lt;br&gt;&amp;#x5176;&amp;#x7ED3;&amp;#x6784;&amp;#x5982;&amp;#x4E0B;&amp;#xFF0C;&amp;#x53C2;&amp;#x8003;&amp;#x5B98;&amp;#x65B9;&amp;#x8BF4;&amp;#x660E;&lt;a href=&quot;https://github.com/lihuiba/flashcachegroup&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x501F;&amp;#x7528;&amp;#x4ECB;&amp;#x7ECD;&amp;#x91CC;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x56FE;&quot;&gt;https://github.com/lihuiba/flashcachegroup&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x501F;&amp;#x7528;&amp;#x4ECB;&amp;#x7ECD;&amp;#x91CC;&amp;#x7684;&amp;#x7ED3;&amp;#x6784;&amp;#x56FE;&lt;/a&gt;.&lt;br&gt;&lt;img src=&quot;/2016/05/05/flashcachegroup/fcg.png&quot; alt=&quot;fcg&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;1-&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot;&gt;&lt;a href=&quot;#1-&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&quot;&gt;&lt;/a&gt;1.&amp;#x5B89;&amp;#x88C5;&amp;#x4F7F;&amp;#x7528;flashcachegroup&lt;/h1&gt;&lt;h2 id=&quot;1&amp;#xFF09;-&amp;#x5B89;&amp;#x88C5;flashcache&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;-&amp;#x5B89;&amp;#x88C5;flashcache&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09; &amp;#x5B89;&amp;#x88C5;flashcache&quot;&gt;&lt;/a&gt;1&amp;#xFF09; &amp;#x5B89;&amp;#x88C5;flashcache&lt;/h2&gt;&lt;p&gt;&amp;#x9996;&amp;#x5148;&amp;#x9700;&amp;#x8981;&amp;#x5B89;&amp;#x88C5;flashcache&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;&amp;#x6E90;&amp;#x7801;&amp;#x5B89;&amp;#x88C5;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git clone https://github.com/facebook/flashcache.git&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#cd flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5207;&amp;#x6362;&amp;#x5230;&amp;#x7A33;&amp;#x5B9A;&amp;#x7248;stable_v3.1.1&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#git checkout stable_v3.1.1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;flashcache&amp;#x7F16;&amp;#x8BD1;&amp;#x9700;&amp;#x8981;&amp;#x4F9D;&amp;#x8D56;KERNE_TREE&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#make KERNEL_TREE=/usr/src/linux-headers-3.10.11-openstack-amd64/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#make install&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x52A0;&amp;#x8F7D;flashcache&amp;#x6A21;&amp;#x5757;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#modprobe flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#lsmod | grep flashcache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="storage" scheme="http://yoursite.com/tags/storage/"/>
    
  </entry>
  
  <entry>
    <title>sheepdog中的erasure code实现机制</title>
    <link href="http://yoursite.com/2016/05/05/sheepdog-erasure-code/"/>
    <id>http://yoursite.com/2016/05/05/sheepdog-erasure-code/</id>
    <published>2016-05-05T03:13:25.000Z</published>
    <updated>2016-05-05T03:30:19.512Z</updated>
    
    <content type="html">&lt;h1 id=&quot;1-&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#1-&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;/a&gt;1.&amp;#x7B80;&amp;#x4ECB;&lt;/h1&gt;&lt;p&gt;Erasure Coding(EC) &amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x6570;&amp;#x636E;&amp;#x5197;&amp;#x4F59;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x76F8;&amp;#x6BD4;&amp;#x4E8E;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x7EA0;&amp;#x5220;&amp;#x7801;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5197;&amp;#x4F59;&amp;#x5EA6;&amp;#x66F4;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5E76;&amp;#x80FD;&amp;#x83B7;&amp;#x5F97;&amp;#x66F4;&amp;#x9AD8;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x53EF;&amp;#x9760;&amp;#x6027;&amp;#x3002;&amp;#x7EA0;&amp;#x5220;&amp;#x7801;&amp;#x5305;&amp;#x542B;&amp;#x4E24;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x7F16;&amp;#x7801;&amp;#x548C;&amp;#x89E3;&amp;#x7801;&amp;#x3002;&amp;#x7F16;&amp;#x7801;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E00;&amp;#x4E9B;&amp;#x6570;&amp;#x636E;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x8BA1;&amp;#x7B97;&amp;#x51FA;&amp;#x4E00;&amp;#x4E9B;&amp;#x6821;&amp;#x9A8C;&amp;#x6570;&amp;#x636E;&amp;#xFF1B;&amp;#x5F53;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x4E22;&amp;#x5931;&amp;#x65F6;&amp;#xFF0C;&amp;#x80FD;&amp;#x591F;&amp;#x4F7F;&amp;#x7528;&amp;#x4F59;&amp;#x4E0B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF08;&amp;#x6E90;&amp;#x6570;&amp;#x636E;&amp;#x548C;&amp;#x6821;&amp;#x9A8C;&amp;#x6570;&amp;#x636E;&amp;#xFF09;&amp;#x89E3;&amp;#x7801;&amp;#x51FA;&amp;#x4E22;&amp;#x5931;&amp;#x7684;&amp;#x90E8;&amp;#x5206;&amp;#x3002;sheepdog&amp;#x4E2D;&amp;#x4E5F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;EC&amp;#x7684;&amp;#x652F;&amp;#x6301;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x4F7F;&amp;#x7528;8:3&amp;#x7684;&amp;#x7EA0;&amp;#x5220;&amp;#x7B56;&amp;#x7565;&amp;#xFF08;8&amp;#x5757;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#xFF0C;3&amp;#x5757;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#xFF09;&amp;#xFF0C;sheepdog&amp;#x5C31;&amp;#x80FD;&amp;#x591F;&amp;#x5BB9;&amp;#x9519;3&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x5B95;&amp;#x6389;&amp;#xFF0C;&amp;#x4EC5;&amp;#x4EC5;&amp;#x53EA;&amp;#x6709;3/8=0.375&amp;#x500D;&amp;#x7684;&amp;#x989D;&amp;#x5916;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x800C;&amp;#x8981;&amp;#x8FBE;&amp;#x5230;&amp;#x76F8;&amp;#x540C;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#x5374;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;4&amp;#x526F;&amp;#x672C;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5E26;&amp;#x6765;&amp;#x4E86;&amp;#x989D;&amp;#x5916;3&amp;#x500D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5F00;&amp;#x9500;&amp;#x3002;sheepdog&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;Erasure Code&amp;#x7684;&amp;#x5F00;&amp;#x6E90;&amp;#x5E93;zfec&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;2-sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot;&gt;&lt;a href=&quot;#2-sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot; class=&quot;headerlink&quot; title=&quot;2.sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot;&gt;&lt;/a&gt;2.sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1&amp;#xFF09;&amp;#x4E00;&amp;#x65E6;&amp;#x6307;&amp;#x5B9A;&amp;#x4E86;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x8BFB;&amp;#x5199;&amp;#x6570;&amp;#x636E;&amp;#x65F6;&amp;#x81EA;&amp;#x52A8;&amp;#x5730;&amp;#x4F7F;&amp;#x7528;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;2&amp;#xFF09;&amp;#x652F;&amp;#x6301;&amp;#x968F;&amp;#x673A;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x5C31;&amp;#x5730;&amp;#x66F4;&amp;#x65B0;&amp;#xFF0C;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;3&amp;#xFF09;&amp;#x652F;&amp;#x6301;&amp;#x4EFB;&amp;#x610F;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;VM&amp;#x955C;&amp;#x50CF;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;4&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;VDI&amp;#x65F6;&amp;#xFF0C;&amp;#x7528;&amp;#x6237;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;5&amp;#xFF09;&amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;EC&amp;#x80FD;&amp;#x591F;&amp;#x83B7;&amp;#x5F97;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x6027;&amp;#x80FD;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;6&amp;#xFF09;&amp;#x4E00;&amp;#x4E2A;&amp;#x96C6;&amp;#x7FA4;&amp;#x4E2D;&amp;#x65E2;&amp;#x80FD;&amp;#x6709;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7684;&amp;#x5377;&amp;#xFF0C;&amp;#x4E5F;&amp;#x80FD;&amp;#x6709;EC&amp;#x7684;&amp;#x5377;&amp;#x3002;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;3-&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#3-&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;3.&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;3.&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&lt;/h1&gt;&lt;p&gt;&amp;#x7528;&amp;#x6237;&amp;#x521B;&amp;#x5EFA;VDI&amp;#xFF08;&amp;#x865A;&amp;#x62DF;&amp;#x5377;&amp;#xFF09;&amp;#x65F6;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x6307;&amp;#x5B9A;EC&amp;#x7B56;&amp;#x7565;&amp;#x3002;&lt;br&gt;$dogvdi create -c x:y vdi size # Create a erasure coded VDI&lt;br&gt;x&amp;#x8868;&amp;#x793A;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x7684;&amp;#x4E2A;&amp;#x6570;&amp;#xFF0C;x&amp;#x53EA;&amp;#x80FD;&amp;#x662F;{2,4,8,16}&amp;#xFF0C;y&amp;#x8868;&amp;#x793A;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#x7684;&amp;#x4E2A;&amp;#x6570;&amp;#xFF0C;y&amp;#x53EF;&amp;#x4EE5;&amp;#x53D6;&amp;#x503C;1~15&amp;#xFF0C;&amp;#x80FD;&amp;#x591F;&amp;#x5BB9;&amp;#x9519;y&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x5B95;&amp;#x6389;&amp;#x3002;&lt;br&gt;&amp;#x5F53;&amp;#x7136;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8282;&amp;#x70B9;&amp;#x4E2A;&amp;#x6570;&amp;#x5C0F;&amp;#x4E8E;x+y&amp;#xFF0C;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x7B56;&amp;#x7565;&amp;#x5C06;&amp;#x4F1A;&amp;#x5931;&amp;#x8D25;&amp;#x3002;&lt;br&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x96C6;&amp;#x7FA4;&amp;#x65F6;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;EC&amp;#x4F5C;&amp;#x4E3A;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#x3002;&lt;br&gt;$ dog cluster format -c x:y&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;4-&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&quot;&gt;&lt;a href=&quot;#4-&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&quot; class=&quot;headerlink&quot; title=&quot;4.&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&quot;&gt;&lt;/a&gt;4.&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&lt;/h1&gt;&lt;p&gt;sheepdog&amp;#x4E2D;&amp;#x7684;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x5927;&amp;#x5C0F;&amp;#x662F;4M&amp;#xFF08;&amp;#x5BF9;&amp;#x5E94;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#x7684;SD_DATA_OBJ_SIZE&amp;#xFF09;&amp;#xFF0C;&amp;#x5728;&amp;#x5404;&amp;#x4E2A;&amp;#x5B58;&amp;#x50A8;&amp;#x8282;&amp;#x70B9;&amp;#x7684;&amp;#x672C;&amp;#x5730;&amp;#x76EE;&amp;#x5F55;&amp;#x4E0B;&amp;#x5B58;&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x90FD;&amp;#x662F;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x3002;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#x4E0B;&amp;#x7684;&amp;#xFF08;&amp;#x793A;&amp;#x4F8B;&amp;#x662F;3&amp;#x526F;&amp;#x672C;&amp;#xFF09;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&amp;#x5982;&amp;#x4E0B;&amp;#x56FE;&amp;#x6240;&amp;#x793A;&amp;#x3002;&lt;br&gt;&lt;img src=&quot;/2016/05/05/sheepdog-erasure-code/data_place.png&quot; alt=&quot;data_place&quot;&gt;&lt;br&gt;&amp;#x91C7;&amp;#x7528;Erasure code&amp;#x540E;&amp;#xFF0C;&amp;#x5377;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5206;&amp;#x5E03;&amp;#x5982;&amp;#x4E0B;&amp;#x56FE;&amp;#xFF1A;&lt;br&gt;&lt;img src=&quot;/2016/05/05/sheepdog-erasure-code/data_place_ec.png&quot; alt=&quot;data_place_ec&quot;&gt;&lt;br&gt;EC&amp;#x7684;&amp;#x7B56;&amp;#x7565;&amp;#x4E3A;X&amp;#xFF1A;Y&amp;#xFF0C;&amp;#x56FE;&amp;#x4E0A;&amp;#x793A;&amp;#x4F8B;&amp;#x662F;4:2&amp;#xFF0C;&amp;#x5373;4&amp;#x4E2A;&amp;#x6570;&amp;#x636E;&amp;#x5E93;&amp;#xFF0C;2&amp;#x4E2A;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#xFF0C;&amp;#x5BF9;&amp;#x5E94;&amp;#x5377;&amp;#x7684;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#xFF0C;&amp;#x5B9E;&amp;#x9645;&amp;#x4E0A;&amp;#x662F;&amp;#x5206;&amp;#x5E03;&amp;#x5230;x+y&amp;#xFF08;&amp;#x56FE;&amp;#x4E0A;&amp;#x4E3A;6&amp;#xFF09;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x4E0A;&amp;#xFF0C;&amp;#x6BCF;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x4E0A;&amp;#x7684;EC&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;4MB/X&amp;#xFF08;&amp;#x793A;&amp;#x4F8B;&amp;#x4E2D;&amp;#x662F;1MB&amp;#xFF09;&amp;#x3002;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;4:2&amp;#x7B56;&amp;#x7565;&amp;#x4E0B;&amp;#x5728;&amp;#x5404;&amp;#x8282;&amp;#x70B9;&amp;#x672C;&amp;#x5730;&amp;#x5B58;&amp;#x7684;EC&amp;#x5377;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x5927;&amp;#x5C0F;&amp;#x662F;1M&amp;#x3002;EC&amp;#x5757;&amp;#x7684;&amp;#x5206;&amp;#x5E03;&amp;#x7B56;&amp;#x7565;&amp;#x4E0E;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x65F6;&amp;#x5404;&amp;#x526F;&amp;#x672C;&amp;#x7684;&amp;#x5206;&amp;#x5E03;&amp;#x7B56;&amp;#x7565;&amp;#x4E00;&amp;#x81F4;&amp;#xFF0C;&amp;#x90FD;&amp;#x662F;&amp;#x91C7;&amp;#x7528;&amp;#x4E00;&amp;#x81F4;&amp;#x6027;&amp;#x54C8;&amp;#x5E0C;&amp;#x7684;&amp;#x5206;&amp;#x5E03;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x56FE;&amp;#x4E0A;&amp;#x53EA;&amp;#x662F;&amp;#x753B;&amp;#x4E86;6&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#xFF0C;&amp;#x5927;&amp;#x4E8E;6&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x65F6;&amp;#xFF0C;EC&amp;#x7684;6&amp;#x4E2A;&amp;#x5757;&amp;#x5C31;&amp;#x4F1A;&amp;#x5206;&amp;#x5E03;&amp;#x5230;&amp;#x8FD9;&amp;#x4E9B;&amp;#x8282;&amp;#x70B9;&amp;#x4E2D;&amp;#x7684;6&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5728;&amp;#x5B9E;&amp;#x73B0;&amp;#x65F6;&amp;#xFF0C;&amp;#x662F;&amp;#x5207;&amp;#x5206;&amp;#x6210;&amp;#x66F4;&amp;#x7EC6;&amp;#x7684;&amp;#x7C92;&amp;#x5EA6;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x5F15;&amp;#x5165;&amp;#x51E0;&amp;#x4E2A;&amp;#x6982;&amp;#x5FF5;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;EC OBJ&amp;#xFF1A;EC&amp;#x7684;&amp;#x5BF9;&amp;#x8C61;&amp;#x5757;&amp;#xFF08;&amp;#x793A;&amp;#x4F8B;&amp;#x4E2D;&amp;#x662F;1M&amp;#x5927;&amp;#x5C0F;&amp;#xFF09;&amp;#xFF0C;&amp;#x4E00;&amp;#x4E2A;EC OBJ&amp;#x7684;&amp;#x547D;&amp;#x540D;&amp;#x662F;&amp;#x4EE5;OBJ&amp;#x7684;id&amp;#xFF08;oid&amp;#xFF09;&amp;#x52A0;&amp;#x4E0A;index&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&amp;#x4E00;&amp;#x4E2A;oid&amp;#x662F; 007c2b2500000001&amp;#xFF0C;&amp;#x5219;EC OBJ&amp;#x662F;&amp;#x547D;&amp;#x540D;&amp;#x4E3A; 007c2b2500000001_1&amp;#x7684;&amp;#x5F62;&amp;#x5F0F;&amp;#x3002;&lt;/li&gt;
&lt;li&gt;stripe&amp;#xFF1A;&amp;#x6A2A;&amp;#x8DE8;&amp;#x591A;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x7684;EC&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;&amp;#x6761;&amp;#x5E26;&amp;#xFF0C;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;SD_EC_DATA_STRIPE_SIZE&amp;#xFF08;=1k&amp;#xFF09;&lt;/li&gt;
&lt;li&gt;strip&amp;#xFF1A;&amp;#x7EC4;&amp;#x6210;stripe&amp;#x7684;&amp;#x57FA;&amp;#x672C;&amp;#x5355;&amp;#x5143;&amp;#xFF0C;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;SD_EC_DATA_STRIPE_SIZE/X&amp;#xFF08;X&amp;#x4E3A;EC&amp;#x7B56;&amp;#x7565;X&amp;#xFF1A;Y&amp;#x4E2D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x4E2A;&amp;#x6570;&amp;#xFF09;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;#x5982;&amp;#x4E0B;&amp;#x56FE;&amp;#x6240;&amp;#x793A;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;VDI&amp;#x7684;&amp;#x4E00;&amp;#x4E2A;4M&amp;#x7684;&amp;#x7A7A;&amp;#x95F4;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5B9E;&amp;#x9645;&amp;#x4E0A;&amp;#x662F;&amp;#x5206;&amp;#x5E03;&amp;#x5230;&amp;#x591A;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x4E0A;&amp;#x7684;EC OBJ&amp;#x5171;&amp;#x540C;&amp;#x63D0;&amp;#x4F9B;&amp;#x7684;&amp;#x3002;&amp;#x4E86;&amp;#x89E3;raid&amp;#x7684;&amp;#x4EBA;&amp;#x5E94;&amp;#x8BE5;&amp;#x4E0D;&amp;#x96BE;&amp;#x7406;&amp;#x89E3;&amp;#xFF0C;&amp;#x5C31;&amp;#x8DDF;raid5/6&amp;#x4E2D;&amp;#x5757;&amp;#x5206;&amp;#x5E03;&amp;#x5230;&amp;#x591A;&amp;#x4E2A;&amp;#x78C1;&amp;#x76D8;&amp;#x7C7B;&amp;#x4F3C;&amp;#x3002;&lt;br&gt;&lt;img src=&quot;/2016/05/05/sheepdog-erasure-code/stripe.png&quot; alt=&quot;stripe&quot;&gt;&lt;br&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x662F;1K&amp;#x800C;&amp;#x4E0D;&amp;#x662F;&amp;#x5176;&amp;#x4ED6;&amp;#x5927;&amp;#x5C0F;&amp;#x5462;&amp;#xFF1F;&lt;br&gt;&lt;br&gt;&amp;#x4ECE;&amp;#x793E;&amp;#x533A;&amp;#x53CA;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#x5F97;&amp;#x77E5;&amp;#xFF0C;&amp;#x8BBE;&amp;#x5B9A;stripe&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;1K&amp;#x662F;&amp;#x7ECF;&amp;#x8FC7;&amp;#x4E86;&amp;#x4E00;&amp;#x4E9B;&amp;#x6D4B;&amp;#x8BD5;&amp;#x786E;&amp;#x5B9A;&amp;#x7684;&amp;#xFF0C;stripe&amp;#x5C0F;&amp;#x4E8E;&amp;#x7B49;&amp;#x4E8E;1k&amp;#x5BF9;&amp;#x4E8E;&amp;#x8FD0;&amp;#x884C;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x6765;&amp;#x8BF4;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B89;&amp;#x5168;&amp;#x7684;&amp;#x503C;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x5C3D;&amp;#x7BA1;&amp;#x5927;&amp;#x591A;&amp;#x6570;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7684;&amp;#x6587;&amp;#x4EF6;&amp;#x7CFB;&amp;#x7EDF;&amp;#x90FD;&amp;#x662F;&amp;#x5904;&amp;#x7406;4K&amp;#x7684;&amp;#x5757;&amp;#xFF0C;&amp;#x6709;&amp;#x4E9B;&amp;#x8F6F;&amp;#x4EF6;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;grub&amp;#x5C31;&amp;#x4F1A;&amp;#x64CD;&amp;#x4F5C;512&amp;#x5B57;&amp;#x8282;&amp;#xFF0C;linux&amp;#x5185;&amp;#x6838;&amp;#x672C;&amp;#x8EAB;&amp;#x4E5F;&amp;#x5076;&amp;#x5C14;&amp;#x4F1A;&amp;#x64CD;&amp;#x4F5C;1K&amp;#x7684;&amp;#x5757;&amp;#x3002;&lt;br&gt;&lt;br&gt;&amp;#x7ECF;&amp;#x8FC7;&amp;#x4E00;&amp;#x4E9B;&amp;#x6D4B;&amp;#x8BD5;&amp;#x8BA4;&amp;#x4E3A;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x60F3;&amp;#x5728;&amp;#x91C7;&amp;#x7528;EC&amp;#x7B56;&amp;#x7565;&amp;#x7684;&amp;#x5377;&amp;#x4E0A;&amp;#x8FD0;&amp;#x884C;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#xFF0C;1K&amp;#x662F;&amp;#x53EF;&amp;#x9009;&amp;#x62E9;&amp;#x7684;&amp;#x6700;&amp;#x5927;&amp;#x503C;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;5-&amp;#x8BFB;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#5-&amp;#x8BFB;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x5904;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;5.&amp;#x8BFB;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;/a&gt;5.&amp;#x8BFB;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x5904;&amp;#x7406;&lt;/h1&gt;&lt;p&gt;sheepdog&amp;#x4F7F;&amp;#x7528;&amp;#x7684;EC&amp;#x652F;&amp;#x6301;&amp;#x5BF9;&amp;#x9F50;&amp;#x548C;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x5BF9;&amp;#x9F50;&amp;#x662F;&amp;#x6307;&amp;#x8BF7;&amp;#x6C42;&amp;#x7684;&amp;#x504F;&amp;#x79FB;&amp;#x548C;&amp;#x5927;&amp;#x5C0F;&amp;#x90FD;&amp;#x4EE5;SD_EC_DATA_STRIPE_SIZE&amp;#x7684;&amp;#x5927;&amp;#x5C0F;1k&amp;#x4E3A;&amp;#x5BF9;&amp;#x9F50;&amp;#x3002;&lt;br&gt;&amp;#x5728;&amp;#x5904;&amp;#x7406;&amp;#x4E0A;&amp;#x5C42;&amp;#x5230;&amp;#x6765;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x65F6;&amp;#xFF0C;sheepdog&amp;#x662F;&amp;#x6309;&amp;#x7167;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x6765;&amp;#x5904;&amp;#x7406;&amp;#x7684;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#x4E0D;&amp;#x5927;&amp;#x4E8E;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x4E0B;&amp;#x53D1;&amp;#x5230;sheepdog&amp;#x8FD9;&amp;#x91CC;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF08;&amp;#x6BCF;&amp;#x4E2A;&amp;#x6570;&amp;#x636E;&amp;#x8BFB;&amp;#x5199;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x90FD;&amp;#x6709;&amp;#x4E2A;oid&amp;#xFF0C;&amp;#x8868;&amp;#x793A;&amp;#x6570;&amp;#x636E;&amp;#x5BF9;&amp;#x8C61;&amp;#x7684;id&amp;#xFF09;&amp;#xFF0C;&amp;#x5927;&amp;#x4E8E;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x5728;&amp;#x5BA2;&amp;#x6237;&amp;#x7AEF;&amp;#x5C31;&amp;#x62C6;&amp;#x5206;&amp;#x6210;&amp;#x591A;&amp;#x4E2A;4M&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&amp;#x800C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6BCF;&amp;#x4E2A;4M&amp;#x5185;&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x6839;&amp;#x636E;&amp;#x8BF7;&amp;#x6C42;&amp;#x7684;&amp;#x504F;&amp;#x79FB;&amp;#x548C;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x6309;&amp;#x7167;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x62C6;&amp;#x5206;&amp;#x6210;&amp;#x591A;&amp;#x4E2A;&amp;#x5C0F;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x53D1;&amp;#x5230;&amp;#x4E0D;&amp;#x540C;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x4E0A;&amp;#x53BB;&amp;#x8FDB;&amp;#x884C;&amp;#x8BFB;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E9B;&amp;#x5C0F;&amp;#x8BF7;&amp;#x6C42;&amp;#x90FD;&amp;#x6210;&amp;#x529F;&amp;#x540E;&amp;#x624D;&amp;#x7B97;&amp;#x6210;&amp;#x529F;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;1&amp;#xFF09;&amp;#x5BF9;&amp;#x9F50;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#1&amp;#xFF09;&amp;#x5BF9;&amp;#x9F50;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;1&amp;#xFF09;&amp;#x5BF9;&amp;#x9F50;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;/a&gt;1&amp;#xFF09;&amp;#x5BF9;&amp;#x9F50;&amp;#x65B9;&amp;#x5F0F;&amp;#x7684;&amp;#x5904;&amp;#x7406;&lt;/h2&gt;&lt;p&gt;&amp;#x4EE5;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E3A;&amp;#x4F8B;&amp;#x8FDB;&amp;#x884C;&amp;#x8BF4;&amp;#x660E;&amp;#xFF0C;&amp;#x8BE5;&amp;#x8BF7;&amp;#x6C42;offset&amp;#x4E3A;0&amp;#xFF08;&amp;#x521A;&amp;#x597D;&amp;#x5BF9;&amp;#x9F50;&amp;#x5230;&amp;#x67D0;&amp;#x4E2A;4M&amp;#x7684;&amp;#x8D77;&amp;#x59CB;&amp;#x4F4D;&amp;#x7F6E;&amp;#xFF09;&amp;#xFF0C;len&amp;#x4E3A;3K.&lt;br&gt;&lt;img src=&quot;/2016/05/05/sheepdog-erasure-code/align.png&quot; alt=&quot;align&quot;&gt;&lt;br&gt;&amp;#x8BE5;&amp;#x8BF7;&amp;#x6C42;&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x4E3A;6&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x5206;&amp;#x522B;&amp;#x53BB;&amp;#x5BF9;&amp;#x5E94;&amp;#x8282;&amp;#x70B9;&amp;#x4E0A;&amp;#x53BB;&amp;#x8BFB;&amp;#x5199;&amp;#x76F8;&amp;#x5E94;&amp;#x7684;EC OBJ&amp;#x3002;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#x662F;&amp;#x5199;&amp;#x6210;&amp;#x529F;&amp;#x5C31;&amp;#x5B8C;&amp;#x4E86;&amp;#xFF0C;&amp;#x800C;&amp;#x8BFB;&amp;#x8BF7;&amp;#x6C42;&amp;#x9700;&amp;#x8981;&amp;#x628A;&amp;#x5404;&amp;#x81EA;&amp;#x8BFB;&amp;#x5230;&amp;#x7684;&amp;#x5185;&amp;#x5BB9;&amp;#x6309;&amp;#x7167;&amp;#x56FE;&amp;#x4E0A;&amp;#x7BAD;&amp;#x5934;&amp;#x7684;&amp;#x9006;&amp;#x8FC7;&amp;#x7A0B;&amp;#x62F7;&amp;#x8D1D;&amp;#x5230;&amp;#x7528;&amp;#x6237;&amp;#x8BF7;&amp;#x6C42;&amp;#x7684;&amp;#x7F13;&amp;#x51B2;&amp;#x533A;&amp;#x4E2D;&amp;#x3002;&amp;#x56FE;&amp;#x4E2D;&amp;#x6CA1;&amp;#x6709;&amp;#x533A;&amp;#x5206;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x548C;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#xFF0C;&amp;#x5176;&amp;#x5B9E;&amp;#x662F;&amp;#x6709;EC&amp;#x7684;&amp;#x7F16;&amp;#x7801;&amp;#x8FC7;&amp;#x7A0B;&amp;#x7684;&amp;#xFF08;&amp;#x6839;&amp;#x636E;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x7F16;&amp;#x7801;&amp;#x51FA;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#xFF09;&amp;#xFF0C;&amp;#x56FE;&amp;#x4E0A;&amp;#x5FFD;&amp;#x7565;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E2A;&amp;#x8FC7;&amp;#x7A0B;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;2&amp;#xFF09;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#2&amp;#xFF09;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;2&amp;#xFF09;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;/a&gt;2&amp;#xFF09;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5904;&amp;#x7406;&lt;/h2&gt;&lt;p&gt;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x8BFB;&amp;#x8BF7;&amp;#x6C42;&amp;#x7684;&amp;#x5904;&amp;#x7406;&amp;#x4E0E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x6CA1;&amp;#x6709;&amp;#x533A;&amp;#x522B;&amp;#x3002;&lt;br&gt;&amp;#x4F46;&amp;#x662F;&amp;#x5BF9;&amp;#x4E8E;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5199;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5148;&amp;#x628A;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x90A3;&amp;#x4E2A;stripe&amp;#x8BFB;&amp;#x51FA;&amp;#x6765;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x9700;&amp;#x8981;&amp;#x8BA1;&amp;#x7B97;&amp;#x6821;&amp;#x9A8C;&amp;#x3002;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x6709;&amp;#x53EF;&amp;#x80FD;&amp;#x662F;&amp;#x504F;&amp;#x79FB;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x8BF7;&amp;#x6C42;&amp;#x5927;&amp;#x5C0F;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#xFF0C;&amp;#x6216;&amp;#x8005;&amp;#x4E24;&amp;#x8005;&amp;#x90FD;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#x3002;&amp;#x8FD9;&amp;#x91CC;&amp;#x4EE5;&amp;#x8BF7;&amp;#x6C42;&amp;#x5927;&amp;#x5C0F;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#x4E3A;&amp;#x4F8B;&amp;#x3002;&amp;#x8BF7;&amp;#x6C42;&amp;#x76F8;&amp;#x5BF9;&amp;#x504F;&amp;#x79FB;&amp;#x4E3A;0&amp;#xFF0C;&amp;#x8BF7;&amp;#x6C42;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;2560Byte&amp;#x3002;&lt;br&gt;&lt;img src=&quot;/2016/05/05/sheepdog-erasure-code/not_align.png&quot; alt=&quot;not_align&quot;&gt;&lt;br&gt;&amp;#x5148;&amp;#x8BFB;&amp;#x51FA;&amp;#x672A;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;stripe&amp;#xFF0C;&amp;#x548C;&amp;#x5F85;&amp;#x5199;&amp;#x6570;&amp;#x636E;&amp;#x4E00;&amp;#x8D77;&amp;#x7ECF;&amp;#x8FC7;EC&amp;#x7F16;&amp;#x7801;&amp;#x540E;&amp;#xFF0C;&amp;#x518D;&amp;#x62C6;&amp;#x5206;&amp;#x6210;&amp;#x591A;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x53D1;&amp;#x5230;&amp;#x5404;&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#x3002;&lt;br&gt;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x5199;&amp;#x6709;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x8BFB;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;&amp;#x4F1A;&amp;#x8BFB;&amp;#x5199;&amp;#x6027;&amp;#x80FD;&amp;#x6709;&amp;#x6240;&amp;#x5F71;&amp;#x54CD;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x662F;&amp;#x4E0D;&amp;#x5EFA;&amp;#x8BAE;&amp;#x4F7F;&amp;#x7528;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;io&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;h2 id=&quot;3&amp;#xFF09;&amp;#x9519;&amp;#x8BEF;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;a href=&quot;#3&amp;#xFF09;&amp;#x9519;&amp;#x8BEF;&amp;#x5904;&amp;#x7406;&quot; class=&quot;headerlink&quot; title=&quot;3&amp;#xFF09;&amp;#x9519;&amp;#x8BEF;&amp;#x5904;&amp;#x7406;&quot;&gt;&lt;/a&gt;3&amp;#xFF09;&amp;#x9519;&amp;#x8BEF;&amp;#x5904;&amp;#x7406;&lt;/h2&gt;&lt;p&gt;&amp;#x91C7;&amp;#x7528;erasure code&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6709;1&amp;#x4E2A;&amp;#x6216;&amp;#x591A;&amp;#x4E2A;&amp;#x5199;&amp;#x5165;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#x65F6;&amp;#x5982;&amp;#x4F55;&amp;#x5904;&amp;#x7406;&amp;#xFF1F;&lt;br&gt;&lt;br&gt;&amp;#x5047;&amp;#x8BBE;&amp;#x603B;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x6570;&amp;#x4E3A;n&amp;#xFF0C;ec&amp;#x7B56;&amp;#x7565;&amp;#x4E3A;x&amp;#xFF1A;y&amp;#xFF0C;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#x7528;fio&amp;#x8DD1;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;kill&amp;#x6740;&amp;#x6389;&amp;#x51E0;&amp;#x4E2A;sheep&amp;#x8282;&amp;#x70B9;&amp;#x8FDB;&amp;#x7A0B;&amp;#xFF0C;&amp;#x4ECE;log&amp;#x4E2D;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;&amp;#x6709;&amp;#x5931;&amp;#x8D25;&amp;#x7684;&amp;#x4FE1;&amp;#x606F;&amp;#xFF0C;&amp;#x4F46;&amp;#x662F;fio&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x62A5;&amp;#x9519;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD8;&amp;#x6D3B;&amp;#x7740;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x6570;&amp;#x5927;&amp;#x4E8E;&amp;#x7B49;&amp;#x4E8E;x&amp;#xFF0C;&amp;#x5C31;&amp;#x8FD8;&amp;#x80FD;&amp;#x7EE7;&amp;#x7EED;&amp;#x5199;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;&amp;#x8BF4;&amp;#xFF0C;&amp;#x5199;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#x4F1A;&amp;#x91CD;&amp;#x8BD5;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6D3B;&amp;#x7740;&amp;#x7684;&amp;#x8282;&amp;#x70B9;&amp;#x6570;&amp;#x5C0F;&amp;#x4E8E;x&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;io &amp;#x62A5;&amp;#x9519;&amp;#x4E86;&amp;#x3002;&lt;br&gt;&lt;br&gt;erasure&amp;#x7684;&amp;#x8BFB;&amp;#x5931;&amp;#x8D25;&amp;#x65F6;&amp;#xFF0C;&amp;#x4E5F;&amp;#x4F1A;&amp;#x91CD;&amp;#x8BD5;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x8282;&amp;#x70B9;&amp;#x6302;&amp;#x4E86;&amp;#x5F15;&amp;#x8D77;&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E2A;&amp;#x91CD;&amp;#x8BD5;&amp;#x7684;&amp;#x8BFB;&amp;#x4F1A;&amp;#x7B49;&amp;#x5230;&amp;#x8BE5;data strip&amp;#x6062;&amp;#x590D;&amp;#x540E;&amp;#x624D;&amp;#x80FD;&amp;#x591F;&amp;#x8BFB;&amp;#x6210;&amp;#x529F;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;1-&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;a href=&quot;#1-&amp;#x7B80;&amp;#x4ECB;&quot; class=&quot;headerlink&quot; title=&quot;1.&amp;#x7B80;&amp;#x4ECB;&quot;&gt;&lt;/a&gt;1.&amp;#x7B80;&amp;#x4ECB;&lt;/h1&gt;&lt;p&gt;Erasure Coding(EC) &amp;#x662F;&amp;#x4E00;&amp;#x79CD;&amp;#x6570;&amp;#x636E;&amp;#x5197;&amp;#x4F59;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x76F8;&amp;#x6BD4;&amp;#x4E8E;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x7EA0;&amp;#x5220;&amp;#x7801;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5197;&amp;#x4F59;&amp;#x5EA6;&amp;#x66F4;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5E76;&amp;#x80FD;&amp;#x83B7;&amp;#x5F97;&amp;#x66F4;&amp;#x9AD8;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x53EF;&amp;#x9760;&amp;#x6027;&amp;#x3002;&amp;#x7EA0;&amp;#x5220;&amp;#x7801;&amp;#x5305;&amp;#x542B;&amp;#x4E24;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x7F16;&amp;#x7801;&amp;#x548C;&amp;#x89E3;&amp;#x7801;&amp;#x3002;&amp;#x7F16;&amp;#x7801;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E00;&amp;#x4E9B;&amp;#x6570;&amp;#x636E;&amp;#x90E8;&amp;#x5206;&amp;#xFF0C;&amp;#x8BA1;&amp;#x7B97;&amp;#x51FA;&amp;#x4E00;&amp;#x4E9B;&amp;#x6821;&amp;#x9A8C;&amp;#x6570;&amp;#x636E;&amp;#xFF1B;&amp;#x5F53;&amp;#x6709;&amp;#x6570;&amp;#x636E;&amp;#x4E22;&amp;#x5931;&amp;#x65F6;&amp;#xFF0C;&amp;#x80FD;&amp;#x591F;&amp;#x4F7F;&amp;#x7528;&amp;#x4F59;&amp;#x4E0B;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#xFF08;&amp;#x6E90;&amp;#x6570;&amp;#x636E;&amp;#x548C;&amp;#x6821;&amp;#x9A8C;&amp;#x6570;&amp;#x636E;&amp;#xFF09;&amp;#x89E3;&amp;#x7801;&amp;#x51FA;&amp;#x4E22;&amp;#x5931;&amp;#x7684;&amp;#x90E8;&amp;#x5206;&amp;#x3002;sheepdog&amp;#x4E2D;&amp;#x4E5F;&amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;EC&amp;#x7684;&amp;#x652F;&amp;#x6301;&amp;#x3002;&amp;#x6BD4;&amp;#x5982;&amp;#x4F7F;&amp;#x7528;8:3&amp;#x7684;&amp;#x7EA0;&amp;#x5220;&amp;#x7B56;&amp;#x7565;&amp;#xFF08;8&amp;#x5757;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#xFF0C;3&amp;#x5757;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#xFF09;&amp;#xFF0C;sheepdog&amp;#x5C31;&amp;#x80FD;&amp;#x591F;&amp;#x5BB9;&amp;#x9519;3&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x5B95;&amp;#x6389;&amp;#xFF0C;&amp;#x4EC5;&amp;#x4EC5;&amp;#x53EA;&amp;#x6709;3/8=0.375&amp;#x500D;&amp;#x7684;&amp;#x989D;&amp;#x5916;&amp;#x6570;&amp;#x636E;&amp;#xFF0C;&amp;#x800C;&amp;#x8981;&amp;#x8FBE;&amp;#x5230;&amp;#x76F8;&amp;#x540C;&amp;#x7684;&amp;#x6548;&amp;#x679C;&amp;#xFF0C;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#x5374;&amp;#x9700;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;4&amp;#x526F;&amp;#x672C;&amp;#xFF0C;&amp;#x5E76;&amp;#x4E14;&amp;#x5E26;&amp;#x6765;&amp;#x4E86;&amp;#x989D;&amp;#x5916;3&amp;#x500D;&amp;#x7684;&amp;#x6570;&amp;#x636E;&amp;#x5F00;&amp;#x9500;&amp;#x3002;sheepdog&amp;#x4E2D;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;Erasure Code&amp;#x7684;&amp;#x5F00;&amp;#x6E90;&amp;#x5E93;zfec&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;2-sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot;&gt;&lt;a href=&quot;#2-sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot; class=&quot;headerlink&quot; title=&quot;2.sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&quot;&gt;&lt;/a&gt;2.sheepdog&amp;#x4E2D;EC&amp;#x7684;&amp;#x7279;&amp;#x6027;&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;1&amp;#xFF09;&amp;#x4E00;&amp;#x65E6;&amp;#x6307;&amp;#x5B9A;&amp;#x4E86;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x8BFB;&amp;#x5199;&amp;#x6570;&amp;#x636E;&amp;#x65F6;&amp;#x81EA;&amp;#x52A8;&amp;#x5730;&amp;#x4F7F;&amp;#x7528;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x989D;&amp;#x5916;&amp;#x7684;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;2&amp;#xFF09;&amp;#x652F;&amp;#x6301;&amp;#x968F;&amp;#x673A;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x5C31;&amp;#x5730;&amp;#x66F4;&amp;#x65B0;&amp;#xFF0C;&amp;#x975E;&amp;#x5BF9;&amp;#x9F50;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;3&amp;#xFF09;&amp;#x652F;&amp;#x6301;&amp;#x4EFB;&amp;#x610F;&amp;#x7C7B;&amp;#x578B;&amp;#x7684;VM&amp;#x955C;&amp;#x50CF;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;4&amp;#xFF09;&amp;#x4F7F;&amp;#x7528;VDI&amp;#x65F6;&amp;#xFF0C;&amp;#x7528;&amp;#x6237;&amp;#x53EF;&amp;#x4EE5;&amp;#x81EA;&amp;#x5B9A;&amp;#x4E49;EC&amp;#x7B56;&amp;#x7565;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;5&amp;#xFF09;&amp;#x76F8;&amp;#x5BF9;&amp;#x4E8E;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#xFF0C;EC&amp;#x80FD;&amp;#x591F;&amp;#x83B7;&amp;#x5F97;&amp;#x66F4;&amp;#x597D;&amp;#x7684;&amp;#x8BFB;&amp;#x5199;&amp;#x6027;&amp;#x80FD;&amp;#xFF1B;&lt;/li&gt;
&lt;li&gt;6&amp;#xFF09;&amp;#x4E00;&amp;#x4E2A;&amp;#x96C6;&amp;#x7FA4;&amp;#x4E2D;&amp;#x65E2;&amp;#x80FD;&amp;#x6709;&amp;#x591A;&amp;#x526F;&amp;#x672C;&amp;#x7684;&amp;#x5377;&amp;#xFF0C;&amp;#x4E5F;&amp;#x80FD;&amp;#x6709;EC&amp;#x7684;&amp;#x5377;&amp;#x3002;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&quot;3-&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;a href=&quot;#3-&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot; class=&quot;headerlink&quot; title=&quot;3.&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&quot;&gt;&lt;/a&gt;3.&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x5F0F;&lt;/h1&gt;&lt;p&gt;&amp;#x7528;&amp;#x6237;&amp;#x521B;&amp;#x5EFA;VDI&amp;#xFF08;&amp;#x865A;&amp;#x62DF;&amp;#x5377;&amp;#xFF09;&amp;#x65F6;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x6307;&amp;#x5B9A;EC&amp;#x7B56;&amp;#x7565;&amp;#x3002;&lt;br&gt;$dogvdi create -c x:y vdi size # Create a erasure coded VDI&lt;br&gt;x&amp;#x8868;&amp;#x793A;&amp;#x6570;&amp;#x636E;&amp;#x5757;&amp;#x7684;&amp;#x4E2A;&amp;#x6570;&amp;#xFF0C;x&amp;#x53EA;&amp;#x80FD;&amp;#x662F;{2,4,8,16}&amp;#xFF0C;y&amp;#x8868;&amp;#x793A;&amp;#x6821;&amp;#x9A8C;&amp;#x5757;&amp;#x7684;&amp;#x4E2A;&amp;#x6570;&amp;#xFF0C;y&amp;#x53EF;&amp;#x4EE5;&amp;#x53D6;&amp;#x503C;1~15&amp;#xFF0C;&amp;#x80FD;&amp;#x591F;&amp;#x5BB9;&amp;#x9519;y&amp;#x4E2A;&amp;#x8282;&amp;#x70B9;&amp;#x5B95;&amp;#x6389;&amp;#x3002;&lt;br&gt;&amp;#x5F53;&amp;#x7136;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8282;&amp;#x70B9;&amp;#x4E2A;&amp;#x6570;&amp;#x5C0F;&amp;#x4E8E;x+y&amp;#xFF0C;&amp;#x6307;&amp;#x5B9A;&amp;#x7684;&amp;#x7B56;&amp;#x7565;&amp;#x5C06;&amp;#x4F1A;&amp;#x5931;&amp;#x8D25;&amp;#x3002;&lt;br&gt;&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x96C6;&amp;#x7FA4;&amp;#x65F6;&amp;#xFF0C;&amp;#x4E5F;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;EC&amp;#x4F5C;&amp;#x4E3A;&amp;#x9ED8;&amp;#x8BA4;&amp;#x7684;&amp;#x526F;&amp;#x672C;&amp;#x7B56;&amp;#x7565;&amp;#x3002;&lt;br&gt;$ dog cluster format -c x:y&lt;/p&gt;
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="storage" scheme="http://yoursite.com/tags/storage/"/>
    
      <category term="sheepdog" scheme="http://yoursite.com/tags/sheepdog/"/>
    
  </entry>
  
  <entry>
    <title>systemtap分析软raid io拆分问题</title>
    <link href="http://yoursite.com/2016/05/03/systemtap-analysis-mdraid-io/"/>
    <id>http://yoursite.com/2016/05/03/systemtap-analysis-mdraid-io/</id>
    <published>2016-05-03T11:02:02.000Z</published>
    <updated>2016-05-03T12:01:47.060Z</updated>
    
    <content type="html">&lt;p&gt;&amp;#x4F7F;&amp;#x7528;linux &amp;#x8F6F;raid1&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x9047;&amp;#x5230;&amp;#x4E2A;&amp;#x5947;&amp;#x602A;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5F53;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x6BD4;&amp;#x5982;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x4E3A;4k&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF1B;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x5982;sdb&amp;#xFF0C;sdc&amp;#xFF0C;vdb&amp;#xFF0C;vdc&amp;#x8FD9;&amp;#x79CD;&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6709;io&amp;#x62C6;&amp;#x5206;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#x4EE5;&amp;#x4F8B;&amp;#x5B50;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD9;&amp;#x4E2A;&amp;#x73B0;&amp;#x8C61;&amp;#xFF08;&amp;#x4EE5;raid1&amp;#xFF0C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF09;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mdadm &amp;#x2013;create /dev/md/md_test1 &amp;#x2013;run &amp;#x2013;force &amp;#x2013;metadata=0.9 &amp;#x2013;assume-clean &amp;#x2013;level=1 &amp;#x2013;raid-devices=2 /dev/vdb /dev/vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 vdc[1] vdb[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8BE5;raid1&amp;#x8FDB;&amp;#x884C;&amp;#x968F;&amp;#x673A;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF08;&amp;#x987A;&amp;#x5E8F;&amp;#x5199;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF09;&amp;#xFF0C;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;64KB&amp;#xFF0C;fio&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x5982;&amp;#x4E0B;:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[global]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rw=randwrite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;direct=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;numjobs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioengine=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bsrange=64k-64k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rate_iops=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;time_based&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime=120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_reporting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[disk00]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename=/dev/md127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x5199;io&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con1-iostat.png&quot; alt=&quot;con1-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;avgrq-sz&amp;#x4E3A;128&amp;#xFF0C;&amp;#x5355;&amp;#x4F4D;&amp;#x662F;&amp;#x6247;&amp;#x533A;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;64KB&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x521B;&amp;#x5EFA;raid1&lt;/h1&gt;&lt;p&gt;&amp;#x8FD9;&amp;#x91CC;&amp;#x5148;&amp;#x7528;vdb&amp;#x548C;vdc&amp;#x5206;&amp;#x522B;&amp;#x521B;&amp;#x5EFA;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x518D;&amp;#x7528;&amp;#x8FD9;&amp;#x4E24;&amp;#x4E2A;dm&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;raid1&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 41943040 linear /dev/vdb 0&amp;quot; | dmsetup create testdisk1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#echo &amp;quot;0 41943040 linear /dev/vdc 0&amp;quot; | dmsetup create testdisk2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#mdadm --create /dev/md/md_test1 --run --force --metadata=0.9 --assume-clean --level=1 --raid-devices=2  /dev/mapper/testdisk1 /dev/mapper/testdisk2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;## cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 dm-1[1] dm-0[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x914D;&amp;#x7F6E;&amp;#x6587;&amp;#x4EF6;&amp;#x4E0D;&amp;#x53D8;&amp;#xFF0C;&amp;#x5BF9;md127&amp;#x8FDB;&amp;#x884C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF0C;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 dm-0 dm-1 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con2-iostat.png&quot; alt=&quot;con2-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;md127&amp;#x548C;dm-0&amp;#xFF0C;dm-1&amp;#x4E0A;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x90FD;&amp;#x662F;4KB&amp;#xFF0C;&amp;#x5B9E;&amp;#x9645;&amp;#x4E0A;&amp;#x5BF9;md127&amp;#x53D1;&amp;#x7684;&amp;#x662F;64KB&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&amp;#x53E6;&amp;#x5916;&amp;#xFF0C;vdb&amp;#x548C;vdc&amp;#x4E0A;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;64KB&amp;#x4E0E;fio&amp;#x53D1;&amp;#x7684;io&amp;#x5927;&amp;#x5C0F;&amp;#x4E00;&amp;#x81F4;&amp;#xFF0C;io&amp;#x53C8;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x540E;&amp;#x9762;&amp;#x4F1A;&amp;#x89E3;&amp;#x91CA;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x4F1A;&amp;#x662F;&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x60C5;&amp;#x51B5;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&quot;&gt;&lt;/a&gt;systemtap&amp;#x5206;&amp;#x6790;io&amp;#x6808;&lt;/h1&gt;&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x9700;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;raid&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;io&amp;#x4F1A;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x80FD;&amp;#x591F;&amp;#x770B;&amp;#x5230;&amp;#x5757;io&amp;#x6BCF;&amp;#x4E00;&amp;#x5C42;&amp;#x6B21;&amp;#x8C03;&amp;#x7528;&amp;#x65F6;&amp;#x7684;io&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x77E5;&amp;#x9053;&amp;#x5728;&amp;#x54EA;&amp;#x4E00;&amp;#x5C42;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x796D;&amp;#x51FA;&amp;#x795E;&amp;#x5668;systemtap&amp;#x3002;&amp;#x4E0D;&amp;#x8FC7;&amp;#x8981;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x8FD8;&amp;#x5F97;&amp;#x5BF9;&amp;#x5185;&amp;#x6838;&amp;#x6709;&amp;#x4E00;&amp;#x5B9A;&amp;#x7684;&amp;#x4E86;&amp;#x89E3;&amp;#xFF0C;&amp;#x4E00;&amp;#x65F6;&amp;#x534A;&amp;#x4F1A;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;linux&amp;#x5185;&amp;#x6838;&amp;#x7684;&amp;#x67D0;&amp;#x4E00;&amp;#x5757;&amp;#x5F88;&amp;#x8270;&amp;#x96BE;&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x5C31;&amp;#x53EA;&amp;#x80FD;&amp;#x5BF9;&amp;#x7167;&amp;#x7740;&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#xFF0C;&amp;#x67E5;&amp;#x627E;&amp;#x5173;&amp;#x952E;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x8C03;&amp;#x7528;&amp;#x5904;&amp;#x6765;&amp;#x8FDB;&amp;#x884C;&amp;#x5206;&amp;#x6790;&amp;#x3002;&amp;#x6700;&amp;#x597D;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0E;&amp;#x7CFB;&amp;#x7EDF;&amp;#x7248;&amp;#x672C;&amp;#x4E00;&amp;#x81F4;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x6E90;&amp;#x7801;&amp;#xFF0C;&amp;#x8FD9;&amp;#x6837;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x66F4;&amp;#x597D;&amp;#x5730;&amp;#x5229;&amp;#x7528;systemtap&amp;#x7684;kernel.statement&amp;#x8FDB;&amp;#x884C;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&amp;#x6211;&amp;#x7684;&amp;#x865A;&amp;#x62DF;&amp;#x673A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x662F;3.2.54&amp;#x7248;&amp;#x672C;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x5C31;&amp;#x662F;&amp;#x4EE5;3.2.54&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x4E3A;&amp;#x51C6;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65E2;&amp;#x7136;&amp;#x662F;&amp;#x5BF9;&amp;#x8F6F;raid&amp;#x5199;io&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x53D1;&amp;#x73B0;io&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x9996;&amp;#x5148;&amp;#x5C31;&amp;#x4ECE;md raid&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x5165;&amp;#x624B;&amp;#xFF0C;io&amp;#x8FDB;&amp;#x5165;&amp;#x8F6F;raid&amp;#x4F1A;&amp;#x7ECF;&amp;#x8FC7;md_make_request&amp;#xFF08;md.c&amp;#x4E2D;&amp;#xFF09;&amp;#x8FDB;&amp;#x884C;&amp;#x5904;&amp;#x7406;&amp;#xFF0C;&amp;#x5728;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x91CC;&amp;#x4F1A;&amp;#x6839;&amp;#x636E;raid&amp;#x7684;&amp;#x4E0D;&amp;#x540C;&amp;#x7EA7;&amp;#x522B;&amp;#x8C03;&amp;#x7528;&amp;#x4E0D;&amp;#x540C;make_request&amp;#xFF08;&amp;#x5982;raid1.c&amp;#x4E2D;&amp;#x7684;make_request&amp;#xFF09;&amp;#x3002;&amp;#x56E0;&amp;#x6B64;&amp;#xFF0C;&amp;#x5148;&amp;#x67E5;&amp;#x770B;md_make_request&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#x6808;&amp;#xFF0C;md_make_request&amp;#x662F;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x6A21;&amp;#x5757;md_mod&amp;#x4E2D;&amp;#x7684;&amp;#x3002;&amp;#x5728;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8F6F;raid&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x65F6;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&amp;#x6CE8;&amp;#x610F;&amp;#xFF1A;&amp;#x8FD9;&amp;#x91CC;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x8981;&amp;#x52A0;&amp;#x4E0A;&amp;#x2013;all-modules&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x52A0;&amp;#x4E0A;&amp;#xFF0C;&amp;#x53EF;&amp;#x80FD;&amp;#x4F1A;&amp;#x5BFC;&amp;#x81F4;&amp;#x6253;&amp;#x5370;&amp;#x7684;&amp;#x51FD;&amp;#x6570;&amp;#x6808;&amp;#x4E0D;&amp;#x5168;&lt;/em&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#stap --all-modules -e &amp;apos;probe module(&amp;quot;md_mod&amp;quot;).function(&amp;quot;md_make_request&amp;quot;){printf(&amp;quot;======================\n&amp;quot;);print_backtrace()}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;======================&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffffa0102c59 : md_make_request+0x0/0x1db [md_mod]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811993d2 : generic_make_request+0x90/0xcf [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811994e4 : submit_bio+0xd3/0xf1 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff811236a4 : dio_bio_submit+0x6e/0x8d [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff8112399d : dio_send_cur_page+0x79/0xa4 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81123a6b : submit_page_section+0xa3/0xf8 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff8112435f : __blockdev_direct_IO+0x751/0xa67 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81122312 : blkdev_direct_IO+0x4e/0x53 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810b5e1c : generic_file_direct_write+0xdc/0x14c [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810b6020 : __generic_file_aio_write+0x194/0x278 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81122629 : blkdev_aio_write+0x1f/0x61 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810fa378 : &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;_sync_write+0xb4/0xec [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810faa69 : vfs_write+0xa2/0xe9 [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff810fac46 : sys_write+0x45/0x6b [kernel]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; 0xffffffff81354d92 : system_call_fastpath+0x16/0x1b [kernel]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&quot;&gt;&lt;/a&gt;systemtap&amp;#x7684;&amp;#x51E0;&amp;#x70B9;&amp;#x4F7F;&amp;#x7528;&amp;#x65B9;&amp;#x6CD5;&lt;/h1&gt;&lt;p&gt;&amp;#x6709;&amp;#x4E86;&amp;#x8FD9;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x8C03;&amp;#x7528;&amp;#x5173;&amp;#x7CFB;&amp;#xFF0C;&amp;#x5C31;&amp;#x53EF;&amp;#x4EE5;&amp;#x5BF9;&amp;#x6BCF;&amp;#x4E2A;&amp;#x51FD;&amp;#x6570;&amp;#x63A2;&amp;#x6D4B;&amp;#xFF0C;&amp;#x67E5;&amp;#x770B;io&amp;#x5927;&amp;#x5C0F;&amp;#xFF0C;&amp;#x8FD9;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x5BF9;&amp;#x7167;&amp;#x7740;&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x67E5;&amp;#x770B;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x4E2D;io&amp;#x5927;&amp;#x5C0F;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;generic_file_direct_write&amp;#x4E2D;&amp;#x7684;count&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/generic_file_direct_write.png&quot; alt=&quot;generic_file_direct_write&quot;&gt;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;stap -L &amp;#x2018;kernel.function(&amp;#x201C;function&amp;#x201D;)&amp;#x2019;&amp;#x67E5;&amp;#x770B;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x6709;&amp;#x54EA;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x53EF;&amp;#x4EE5;&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -L &amp;apos;kernel.function(&amp;quot;generic_file_direct_write&amp;quot;)&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;generic_file_direct_write@/build/linux-FpPMO6/linux-3.2.54/mm/filemap.c:2266&amp;quot;&lt;/span&gt;) &lt;span class=&quot;variable&quot;&gt;$iocb&lt;/span&gt;:struct kiocb* &lt;span class=&quot;variable&quot;&gt;$iov&lt;/span&gt;:struct iovec const* &lt;span class=&quot;variable&quot;&gt;$nr_segs&lt;/span&gt;:long unsigned int* &lt;span class=&quot;variable&quot;&gt;$pos&lt;/span&gt;:loff_t &lt;span class=&quot;variable&quot;&gt;$ppos&lt;/span&gt;:loff_t* &lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt;:size_t &lt;span class=&quot;variable&quot;&gt;$ocount&lt;/span&gt;:size_t &lt;span class=&quot;variable&quot;&gt;$file&lt;/span&gt;:struct file* &lt;span class=&quot;variable&quot;&gt;$write_len&lt;/span&gt;:size_t&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x53C2;&amp;#x6570;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x7701;&amp;#x53BB;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x6BB5;&amp;#x4E00;&amp;#x4E2A;&amp;#x5B57;&amp;#x6BB5;&amp;#x53BB;&amp;#x6253;&amp;#x5370;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;$var$$&amp;#x8FD9;&amp;#x6837;&amp;#x7684;&amp;#x65B9;&amp;#x5F0F;&amp;#x628A;&amp;#x6574;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -e &amp;apos;probe kernel.function(&amp;quot;__blockdev_direct_IO&amp;quot;){printf(&amp;quot;[__blockdev_direct_IO] nr_segs:%d, iov:%s\n&amp;quot;, $nr_segs, $iov$$)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x21ff000, .iov_len=65536}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x6709;&amp;#x7684;&amp;#x5185;&amp;#x6838;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;&amp;#x53EF;&amp;#x63A2;&amp;#x6D4B;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x65F6;&amp;#xFF0C;&amp;#x6BD4;&amp;#x5982;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -L &amp;apos;kernel.function(&amp;quot;dio_send_cur_page&amp;quot;)&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_send_cur_page@/build/linux-FpPMO6/linux-3.2.54/fs/direct-io.c:693&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5982;&amp;#x679C;&amp;#x4ECD;&amp;#x7136;&amp;#x53BB;&amp;#x6253;&amp;#x5370;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x7684;&amp;#x53C2;&amp;#x6570;&amp;#x65F6;&amp;#x5C31;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#stap -e &amp;apos;probe kernel.function(&amp;quot;dio_send_cur_page&amp;quot;){printf(&amp;quot;[dio_send_cur_page] sdio:%s\n&amp;quot;, $sdio$$)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;semantic error: unable to find &lt;span class=&quot;built_in&quot;&gt;local&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&amp;apos;sdio&amp;apos;&lt;/span&gt;, [man error::dwarf] dieoffset 0x13b5772 &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; kernel, near pc 0xffffffff811239c1 &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; dio_send_cur_page /build/linux-FpPMO6/linux-3.2.54/fs/direct-io.c (&amp;lt;no alternatives&amp;gt;): identifier &lt;span class=&quot;string&quot;&gt;&amp;apos;$sdio$$&amp;apos;&lt;/span&gt; at &amp;lt;input&amp;gt;:1:87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;source&lt;/span&gt;: probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_send_cur_page&amp;quot;&lt;/span&gt;){&lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_send_cur_page] sdio:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;$$)}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                                                      ^&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x4E2A;&amp;#x65F6;&amp;#x5019;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x6362;&amp;#x4E00;&amp;#x79CD;&amp;#x65B9;&amp;#x5F0F;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x4F7F;&amp;#x7528;kernel.statement&amp;#x63A2;&amp;#x6D4B;&amp;#x67D0;&amp;#x4E00;&amp;#x884C;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&lt;br&gt;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x5728;fs/direct-io.c&amp;#x4E2D;693&amp;#x884C;&amp;#x5F00;&amp;#x59CB;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x53EF;&amp;#x4EE5;&amp;#x5BF9;&amp;#x8BE5;&amp;#x51FD;&amp;#x6570;&amp;#x5185;&amp;#x7684;&amp;#x67D0;&amp;#x4E00;&amp;#x884C;&amp;#x7684;&amp;#x53D8;&amp;#x91CF;&amp;#x8FDB;&amp;#x884C;&amp;#x6253;&amp;#x5370;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# stap -e &amp;apos;probe kernel.statement(&amp;quot;*@fs/direct-io.c:700&amp;quot;){printf(&amp;quot;[dio_send_cur_page] bio size:%d\n&amp;quot;, $sdio-&amp;gt;bio-&amp;gt;bi_size)}&amp;apos;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] bio size:4096&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot;&gt;&lt;a href=&quot;#systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot; class=&quot;headerlink&quot; title=&quot;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&quot;&gt;&lt;/a&gt;systemtap&amp;#x5206;&amp;#x6790;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&lt;/h1&gt;&lt;p&gt;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;generic_file_direct_write&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[generic_file_direct_write] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$count&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;__blockdev_direct_IO&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[__blockdev_direct_IO] nr_segs:%d, iov:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$nr_segs&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$iov&lt;/span&gt;$)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/direct-io.c:774&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(&lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[submit_page_section] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/direct-io.c:700&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_send_cur_page] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;dio_bio_submit&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[dio_bio_submit] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$sdio&lt;/span&gt;-&amp;gt;bio-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.function(&lt;span class=&quot;string&quot;&gt;&amp;quot;submit_bio&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[submit_bio] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe module(&lt;span class=&quot;string&quot;&gt;&amp;quot;md_mod&amp;quot;&lt;/span&gt;).function(&lt;span class=&quot;string&quot;&gt;&amp;quot;md_make_request&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;[md_make_request] size:%d\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_size)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x5206;&amp;#x522B;&amp;#x5BF9;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x548C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x8FDB;&amp;#x884C;&amp;#x63A2;&amp;#x6D4B;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;32KB&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&lt;/strong&gt;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xcd0000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xcd0000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7ED3;&amp;#x679C;&amp;#x4E2D;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x51FA;&amp;#x5728;__blockdev_direct_IO&amp;#x91CC;&amp;#x8FDB;&amp;#x884C;&amp;#x4E86;io&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x672C;&amp;#x6765;&amp;#x662F;32KB&amp;#x7684;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF0C;&amp;#x62C6;&amp;#x5206;&amp;#x6210;&amp;#x4E86;4KB&amp;#x7684;io&amp;#xFF08;&amp;#x6B63;&amp;#x597D;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;page&amp;#xFF09;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;dio_bio_submit&amp;#xFF0C;submit_bio&amp;#xFF0C;md_make_request&amp;#x90FD;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;8&amp;#x6B21;&amp;#xFF08;32KB/4KB=8)&amp;#xFF0C;&amp;#x800C;dio_send_cur_page&amp;#x53EA;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;7&amp;#x6B21;&amp;#xFF0C;&amp;#x5C11;&amp;#x4E86;&amp;#x4E00;&amp;#x6B21;&amp;#xFF0C;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x7B2C;&amp;#x516B;&amp;#x6B21;&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;&amp;#x4E86;dio_bio_submit&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&lt;strong&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&lt;/strong&gt;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x2139000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:8192&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:12288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:12288&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:16384&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:20480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:20480&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:24576&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:24576&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:28672&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0x2139000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;dio_send_cur_page&amp;#x6BCF;&amp;#x8C03;&amp;#x7528;&amp;#x4E00;&amp;#x6B21;&amp;#xFF0C;size&amp;#x90FD;&amp;#x53D8;&amp;#x5927;&amp;#x4E86;&amp;#xFF0C;&amp;#x521A;&amp;#x597D;&amp;#x6BCF;&amp;#x6B21;&amp;#x589E;&amp;#x52A0;4KB&amp;#xFF0C;&amp;#x731C;&amp;#x6D4B;&amp;#x662F;&amp;#x5728;__blockdev_direct_IO&amp;#x6309;page&amp;#x5927;&amp;#x5C0F;&amp;#x5C06;io&amp;#x62C6;&amp;#x5206;&amp;#xFF0C;&amp;#x7136;&amp;#x540E;&amp;#x5728;dio_send_cur_page&amp;#x8FDB;&amp;#x884C;io&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5408;&amp;#x5E76;&amp;#x540E;&amp;#x4E0B;&amp;#x53D1;&amp;#x5230;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x4E0A;&amp;#x7684;io&amp;#x7531;&amp;#x53D8;&amp;#x6210;&amp;#x4E86;32KB&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;a href=&quot;#&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&quot;&gt;&lt;/a&gt;&amp;#x6DF1;&amp;#x5165;&amp;#x5206;&amp;#x6790;io&amp;#x5408;&amp;#x5E76;&amp;#x95EE;&amp;#x9898;&lt;/h1&gt;&lt;p&gt;&amp;#x63A5;&amp;#x4E0B;&amp;#x6765;&amp;#x5C31;&amp;#x662F;&amp;#x8981;&amp;#x5F04;&amp;#x6E05;&amp;#x695A;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#xFF0C;dio_send_cur_page&amp;#x4E2D;&amp;#x5408;&amp;#x5E76;&amp;#x9875;&amp;#x4F1A;&amp;#x5931;&amp;#x8D25;&amp;#x3002;&lt;br&gt;&amp;#x5728;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x524D;&amp;#x4E00;&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x4E0E;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x662F;&amp;#x5426;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x662F;&amp;#x5C31;&amp;#x4F1A;&amp;#x8C03;&amp;#x7528;dio_bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x4E0D;&amp;#x662F;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;dio_bio_submit&amp;#x4E0B;&amp;#x53D1;&amp;#x8BF7;&amp;#x6C42;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x6D4B;&amp;#x8BD5;&amp;#x65F6;&amp;#x6BCF;&amp;#x6B21;&amp;#x7528;fio&amp;#x53D1;32KB&amp;#x7684;&amp;#x8BF7;&amp;#x6C42;&amp;#xFF0C;&amp;#x5230;dio_send_cur_page&amp;#x8FD9;&amp;#x4E00;&amp;#x5C42;&amp;#x53D8;&amp;#x6210;4KB&amp;#xFF0C;&amp;#x56E0;&amp;#x6B64;&amp;#x6BCF;8&amp;#x4E2A;&amp;#x8BF7;&amp;#x6C42;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#xFF08;&amp;#x4ECE;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x7ED3;&amp;#x679C;&amp;#x4E2D;&amp;#x4E5F;&amp;#x80FD;&amp;#x770B;&amp;#x51FA;&amp;#x6765;&amp;#xFF09;&amp;#xFF0C;&amp;#x5BF9;&amp;#x4E8E;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5E94;&amp;#x8BE5;&amp;#x662F;&amp;#x8FDE;&amp;#x7EED;&amp;#x7684;&amp;#x624D;&amp;#x5BF9;&amp;#xFF0C;&amp;#x53EF;&amp;#x662F;&amp;#x7ED3;&amp;#x679C;&amp;#x5374;&amp;#x662F;dio_send_cur_page&amp;#x8FD9;&amp;#x91CC;&amp;#x6CA1;&amp;#x6709;&amp;#x5408;&amp;#x5E76;&amp;#x5176;&amp;#x4ED6;&amp;#x76F8;&amp;#x90BB;&amp;#x7684;io&amp;#x6216;&amp;#x8005;&amp;#x662F;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#xFF0C;dio_send_cur_page&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x6709;&amp;#x8FD9;&amp;#x4E48;&amp;#x4E00;&amp;#x5904;&amp;#x4EE3;&amp;#x7801;&amp;#xFF1A;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/dio_bio_add_page.png&quot; alt=&quot;dio_bio_add_page&quot;&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8C03;&amp;#x7528;dio_bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x76F4;&amp;#x63A5;&amp;#x8C03;&amp;#x7528;dio_bio_submit&amp;#x628A;&amp;#x5F53;&amp;#x524D;&amp;#x8BF7;&amp;#x6C42;&amp;#x63D0;&amp;#x4EA4;&amp;#x3002;&lt;br&gt;&amp;#x6000;&amp;#x7591;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x8FD9;&amp;#x4E2A;&amp;#x5730;&amp;#x65B9;&amp;#x5408;&amp;#x5E76;&amp;#x5931;&amp;#x8D25;&amp;#x4E86;&amp;#x3002;&lt;br&gt;dio_bio_add_page&amp;#x4E2D;&amp;#x53C8;&amp;#x662F;&amp;#x8C03;&amp;#x7528;bio_add_page&amp;#x8FDB;&amp;#x884C;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;bio_add_page&amp;#x8C03;&amp;#x7528;&lt;strong&gt;bio_add_page&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8FD9;&amp;#x91CC;&amp;#x6CE8;&amp;#x610F;&amp;#x5173;&amp;#x6CE8;&lt;/strong&gt;bio_add_page&amp;#x8FD4;&amp;#x56DE;&amp;#x5931;&amp;#x8D25;&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x3002;&amp;#x6709;&amp;#x51E0;&amp;#x5904;return 0&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#xFF0C;&amp;#x4E3A;&amp;#x4E86;&amp;#x5FEB;&amp;#x901F;&amp;#x627E;&amp;#x51FA;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x662F;&amp;#x5728;&amp;#x54EA;&amp;#x4E00;&amp;#x5904;return 0&amp;#x7684;&amp;#xFF0C;&amp;#x53EF;&amp;#x4EE5;&amp;#x5206;&amp;#x522B;&amp;#x5728;&amp;#x8FD9;&amp;#x51E0;&amp;#x5904;return 0&amp;#x7684;&amp;#x5730;&amp;#x65B9;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x63A2;&amp;#x6D4B;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5C06;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x811A;&amp;#x672C;&amp;#x52A0;&amp;#x5230;&amp;#x4E0A;&amp;#x9762;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;systemtap&amp;#x811A;&amp;#x672C;&amp;#x4E2D;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:530&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;aaaaaaaaaaaaaaaaaaaaaaaaaaa\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:561&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;cccccccccccccccccccccc\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:581&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;ddddddddddddddddddddddd\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:616&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;eeeeeeeeeeeeeeeeeeeeee\n&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5BF9;&amp;#x4E8E;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x6267;&amp;#x884C;&amp;#x7684;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[generic_file_direct_write] size:32768&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[__blockdev_direct_IO] nr_segs:1, iov:{.iov_base=0xccd000, .iov_len=32768}&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_bio_submit] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_bio] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[md_make_request] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[submit_page_section] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[dio_send_cur_page] size:4096&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;........&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x8BF4;&amp;#x660E;&amp;#x662F;&amp;#x5728;bio.c&amp;#x4E2D;&amp;#x7684;581&amp;#x884C;&amp;#x5904;return&amp;#x7684;&amp;#xFF0C;&amp;#x8FD9;&amp;#x4E00;&amp;#x5904;&amp;#x7684;&amp;#x4EE3;&amp;#x7801;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/blk_recount_segments.png&quot; alt=&quot;blk_recount_segments&quot;&gt;&lt;br&gt;&amp;#x5176;&amp;#x4E2D;queue_max_segments(q)&amp;#x5C31;&amp;#x662F;q-&amp;gt;limits.max_segments&lt;br&gt;&amp;#x518D;&amp;#x4F7F;&amp;#x7528;systemtap&amp;#x628A;bio-&amp;gt;bi_phys_segments&amp;#x548C;q-&amp;gt;limits.max_segments&amp;#x7684;&amp;#x503C;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x4E86;&amp;#xFF0C;&amp;#x8FD9;&amp;#x91CC;&amp;#x662F;&amp;#x628A;q-&amp;gt;limits&amp;#x6574;&amp;#x4E2A;&amp;#x7ED3;&amp;#x6784;&amp;#x4F53;&amp;#x90FD;&amp;#x6253;&amp;#x5370;&amp;#x51FA;&amp;#x6765;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;probe kernel.statement(&lt;span class=&quot;string&quot;&gt;&amp;quot;*@fs/bio.c:581&amp;quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;{&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;ddddddddddddddddddddddd bio-&amp;gt;bi_phys_segments:%d, q-&amp;gt;limits:%s\n&amp;quot;&lt;/span&gt;, &lt;span class=&quot;variable&quot;&gt;$bio&lt;/span&gt;-&amp;gt;bi_phys_segments, &lt;span class=&quot;variable&quot;&gt;$q&lt;/span&gt;-&amp;gt;limits$$)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x7ED3;&amp;#x679C;&amp;#x5982;&amp;#x4E0B;&amp;#xFF1A;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ddddddddddddddddddddddd bio-&amp;gt;bi_phys_segments:1, q-&amp;gt;limits:{.bounce_pfn=4503599627370495, .seg_boundary_mask=4095, .max_hw_sectors=255, .max_sectors=255, .max_segment_size=65536, .physical_block_size=512, .alignment_offset=0, .io_min=512, .io_opt=0, .max_discard_sectors=0, .discard_granularity=0, .discard_alignment=0, .logical_block_size=512, .max_segments=1, .max_integrity_segments=0, .misaligned=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;, .discard_misaligned=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;, .cluster=&lt;span class=&quot;string&quot;&gt;&amp;apos;\001&amp;apos;&lt;/span&gt;, .discard_zeroes_data=&lt;span class=&quot;string&quot;&gt;&amp;apos;\000&amp;apos;&lt;/span&gt;}&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;bio-&amp;gt;bi_phys_segments=1&amp;#xFF0C;q-&amp;gt;limits.max_segments=1&amp;#xFF0C;&lt;br&gt;&amp;#x5206;&amp;#x6790;&amp;#x4EE3;&amp;#x7801;&amp;#x5728;578&amp;#x884C;&amp;#x6EE1;&amp;#x8DB3;while&amp;#x6761;&amp;#x4EF6;&amp;#xFF0C;&amp;#x8FDB;&amp;#x5165;&amp;#x5FAA;&amp;#x73AF;&amp;#x540E;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;retried_segments&amp;#x521D;&amp;#x59CB;&amp;#x5316;&amp;#x4E3A;0&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x8DF3;&amp;#x8FC7;if&amp;#x5224;&amp;#x65AD;&amp;#xFF0C;&amp;#x5C06;retried_segments&amp;#x8D4B;&amp;#x503C;&amp;#x4E3A;1&amp;#xFF0C;&amp;#x4E0B;&amp;#x6B21;&amp;#x518D;&amp;#x5FAA;&amp;#x73AF;&amp;#x65F6;&amp;#x5C31;&amp;#x6EE1;&amp;#x8DB3;if&amp;#x5224;&amp;#x65AD;&amp;#x6761;&amp;#x4EF6;&amp;#xFF0C;return&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x5176;&amp;#x4E2D;q-&amp;gt;limits&amp;#x53CD;&amp;#x6620;&amp;#x5230;sysfs&amp;#x4E2D;&amp;#x5C31;&amp;#x662F;/sys/block/xxx/queue/&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x4E00;&amp;#x4E9B;&amp;#x53C2;&amp;#x6570;&amp;#x3002;&lt;br&gt;&amp;#x67E5;&amp;#x770B;md127&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/md127/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x800C;&amp;#x5176;&amp;#x4ED6;&amp;#x8BBE;&amp;#x5907;&amp;#x5982;vdc&amp;#xFF0C;vdd&amp;#x8FD9;&amp;#x4E2A;&amp;#x503C;&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/vdc/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x4E3A;&amp;#x4EC0;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E3A;1&amp;#x5462;&amp;#xFF1F;&amp;#x662F;&amp;#x6240;&amp;#x6709;&amp;#x7684;md&amp;#x8BBE;&amp;#x5907;&amp;#x90FD;&amp;#x4F1A;&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;1&amp;#x5417;&amp;#xFF1F;&lt;br&gt;&amp;#x5207;&amp;#x6362;&amp;#x5230;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x4E0B;&amp;#xFF08;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;raid1&amp;#xFF09;&amp;#xFF0C;&amp;#x67E5;&amp;#x770B;&amp;#x6B64;&amp;#x65F6;&amp;#x7684;md127&amp;#x7684;max_segments.&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /sys/block/md127/queue/max_segments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&amp;#x5C45;&amp;#x7136;&amp;#x662F;126&amp;#xFF0C;&amp;#x800C;&amp;#x4E0D;&amp;#x662F;1&amp;#xFF01;&amp;#xFF01;&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x8FD9;&amp;#x79CD;&amp;#x60C5;&amp;#x51B5;&amp;#x4E0B;&amp;#x5C31;&amp;#x9700;&amp;#x8981;&amp;#x77E5;&amp;#x9053;&amp;#x5728;&amp;#x54EA;&amp;#x91CC;&amp;#x628A;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1&amp;#x4E86;&amp;#xFF0C;&amp;#x76F4;&amp;#x63A5;&amp;#x5728;linux&amp;#x5185;&amp;#x6838;&amp;#x4EE3;&amp;#x7801;&amp;#x4E2D;&amp;#x641C;&amp;#x201D;max_segments&amp;#x201D;&amp;#xFF0C;&amp;#x6700;&amp;#x540E;&amp;#x627E;&amp;#x5230;&amp;#x5728;raid1.c&amp;#x4E2D;run&amp;#x51FD;&amp;#x6570;&amp;#x4E2D;&amp;#x4F1A;&amp;#x5224;&amp;#x65AD;&amp;#x7EC4;&amp;#x6210;raid&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x662F;&amp;#x5426;&amp;#x6709;merge_bvec_fn&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#xFF0C;&amp;#x5C31;&amp;#x4F1A;&amp;#x5C06;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x4E3A;1&amp;#x3002;&amp;#x800C;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;&amp;#x4E2D;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x7684;&amp;#x8F6F;raid1&amp;#xFF0C;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x6709;&amp;#x5BF9;&amp;#x5E94;&amp;#x7684;merge_bvec_fn&amp;#x51FD;&amp;#x6570;&amp;#xFF1B;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#x662F;&amp;#x4F7F;&amp;#x7528;&amp;#x7684;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x6CA1;&amp;#x6709;merge_bvec_fn&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x5C31;&amp;#x4E0D;&amp;#x4FEE;&amp;#x6539;max_segments&amp;#x7684;&amp;#x503C;&amp;#x3002;&amp;#x4E4B;&amp;#x6240;&amp;#x4EE5;&amp;#x4F1A;&amp;#x8FD9;&amp;#x6837;&amp;#x505A;&amp;#xFF0C;&amp;#x662F;&amp;#x56E0;&amp;#x4E3A;&amp;#x7CFB;&amp;#x7EDF;&amp;#x8BA4;&amp;#x4E3A;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x5982;&amp;#x679C;&amp;#x6709;&amp;#x81EA;&amp;#x5DF1;&amp;#x7684;io&amp;#x5408;&amp;#x5E76;&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;&amp;#x5728;&amp;#x4E0A;&amp;#x5C42;&amp;#x5C31;&amp;#x4E0D;&amp;#x9700;&amp;#x8981;&amp;#x5408;&amp;#x5E76;&amp;#xFF0C;&amp;#x4EA4;&amp;#x7ED9;&amp;#x8BE5;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#x81EA;&amp;#x5DF1;&amp;#x5408;&amp;#x5E76;io&amp;#x3002;&lt;br&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/raid1_run.png&quot; alt=&quot;raid1_run&quot;&gt;&lt;br&gt;&amp;#x53E6;&amp;#x5916;&amp;#x9700;&amp;#x8981;&amp;#x6CE8;&amp;#x610F;&amp;#x7684;&amp;#x4E00;&amp;#x70B9;&amp;#xFF1A;/sys/block/xxx/queue/max_segments &amp;#x8FD9;&amp;#x662F;&amp;#x4E2A;&amp;#x53EA;&amp;#x8BFB;&amp;#x7684;&amp;#xFF0C;&amp;#x5C1D;&amp;#x8BD5;&amp;#x53BB;&amp;#x4FEE;&amp;#x6539;&amp;#x4F1A;&amp;#x62A5;&amp;#x9519;&amp;#x7684;&amp;#x3002;&lt;br&gt;&amp;#x81F3;&amp;#x6B64;&amp;#xFF0C;&amp;#x7EC8;&amp;#x4E8E;&amp;#x627E;&amp;#x5230;&amp;#x60C5;&amp;#x5F62;&amp;#x4E8C;io&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x7684;&amp;#x539F;&amp;#x56E0;&amp;#x4E86;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max-segments&quot;&gt;&lt;a href=&quot;#device-mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max-segments&quot; class=&quot;headerlink&quot; title=&quot;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&quot;&gt;&lt;/a&gt;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&lt;/h1&gt;&lt;p&gt;&amp;#x53E6;&amp;#x4E00;&amp;#x4E2A;&amp;#x95EE;&amp;#x9898;&amp;#xFF1A;&amp;#x4EE5;md&amp;#x8BBE;&amp;#x5907;&amp;#x5EFA;&amp;#x6210;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF0C;&amp;#x5982;&amp;#x679C;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E3A;1&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;&amp;#x8FD9;&amp;#x4E2A;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E5F;&amp;#x662F;1&amp;#xFF1B;&amp;#x5982;&amp;#x679C;md&amp;#x8BBE;&amp;#x5907;max_segments&amp;#x4E3A;126&amp;#xFF0C;&amp;#x90A3;&amp;#x4E48;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x7684;max_segments&amp;#x4E5F;&amp;#x4E3A;126&amp;#xFF0C;&lt;br&gt;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;&amp;#x628A;queue limits&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;&amp;#x9ED8;&amp;#x8BA4;&amp;#x503C;&amp;#x7684;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;max_segments&amp;#x7684;&amp;#x9ED8;&amp;#x8BA4;&amp;#x662F;128&amp;#xFF0C;&lt;br&gt;&amp;#x7136;&amp;#x540E;&amp;#x5728;bdev_stack_limits&amp;#x4E2D;&amp;#x4F1A;&amp;#x6BD4;&amp;#x8F83;&amp;#x81EA;&amp;#x8EAB;&amp;#x7684;queue limits&amp;#x548C;device mapper&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;queue limits&amp;#xFF0C;&amp;#x4E24;&amp;#x8005;&amp;#x53D6;&amp;#x6700;&amp;#x5C0F;&amp;#x503C;&amp;#xFF0C;&amp;#x56E0;&amp;#x4E3A;&amp;#x73B0;&amp;#x5728;&amp;#x4E0B;&amp;#x9762;&amp;#x7684;&amp;#x8BBE;&amp;#x5907;&amp;#x662F;&amp;#x4E00;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x8FD9;&amp;#x4E2A;md&amp;#x8BBE;&amp;#x5907;&amp;#x73B0;&amp;#x5728;&amp;#x7684;max_segments&amp;#x662F;1&amp;#xFF09;&amp;#xFF0C;&amp;#x6240;&amp;#x4EE5;&amp;#x6700;&amp;#x7EC8;&amp;#x4F1A;&amp;#x628A;&amp;#x8FD9;&amp;#x4E2A;device mapper&amp;#x7684;max_segments&amp;#x8BBE;&amp;#x7F6E;&amp;#x6210;1&amp;#x3002;&lt;/p&gt;
&lt;p&gt;&amp;#x65B0;&amp;#x5EFA;&amp;#x4E00;&amp;#x4E2A;device mapper&amp;#x7684;&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#x7684;&amp;#x6700;&amp;#x540E;&amp;#x4E00;&amp;#x6B65;&amp;#x662F;&amp;#x8C03;&amp;#x7528;do_resume&amp;#x51FD;&amp;#x6570;&amp;#xFF0C;device mapper&amp;#x7684;&amp;#x521B;&amp;#x5EFA;&amp;#x903B;&amp;#x8F91;&amp;#x53C2;&amp;#x8003;&lt;a href=&quot;http://www.ibm.com/developerworks/cn/linux/l-devmapper/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&amp;#x521B;&amp;#x5EFA;device mapper&lt;/a&gt;&amp;#x3002;&lt;br&gt;&lt;figure class=&quot;highlight cpp&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;do_resume(drivers/md/dm-ioctl.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    |--dm_swap_table(drivers/md/dm.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            |--dm_calculate_queue_limits(drivers/md/dm-table.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                   |--ti-&amp;gt;type-&amp;gt;iterate_devices(ti, dm_set_device_limits,&amp;amp;ti_limits)  &amp;#x5BF9;&amp;#x5E94;linear&amp;#x4E2D;&amp;#x7684;linear_iterate_devices&amp;#xFF08;drivers/md/dm-linear.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                            |--dm_set_device_limits(drivers/md/dm-table.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    |--bdev_stack_limits(block/blk-setting.c)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                           |--blk_stack_limits(block/blk-setting.c)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x603B;&amp;#x7ED3;&quot;&gt;&lt;a href=&quot;#&amp;#x603B;&amp;#x7ED3;&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x603B;&amp;#x7ED3;&quot;&gt;&lt;/a&gt;&amp;#x603B;&amp;#x7ED3;&lt;/h1&gt;&lt;p&gt;&amp;#x4ECE;&amp;#x4E0A;&amp;#x9762;&amp;#x7684;&amp;#x5206;&amp;#x6790;&amp;#x770B;&amp;#x51FA;&amp;#xFF0C;max_segments&amp;#x8FD9;&amp;#x4E2A;&amp;#x53C2;&amp;#x6570;&amp;#x5F71;&amp;#x54CD;&amp;#x4E86;io&amp;#x7684;&amp;#x5408;&amp;#x5E76;&amp;#x3002;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&amp;#x4F7F;&amp;#x7528;linux &amp;#x8F6F;raid1&amp;#x7684;&amp;#x65F6;&amp;#x5019;&amp;#x9047;&amp;#x5230;&amp;#x4E2A;&amp;#x5947;&amp;#x602A;&amp;#x7684;&amp;#x95EE;&amp;#x9898;&amp;#xFF0C;&amp;#x5C31;&amp;#x662F;&amp;#x5F53;&amp;#x4F7F;&amp;#x7528;&amp;#x903B;&amp;#x8F91;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x6BD4;&amp;#x5982;device mapper&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#xFF0C;&amp;#x90FD;&amp;#x4F1A;&amp;#x88AB;&amp;#x62C6;&amp;#x5206;&amp;#x4E3A;4k&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x7684;io&amp;#xFF1B;&amp;#x800C;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#xFF08;&amp;#x5982;sdb&amp;#xFF0C;sdc&amp;#xFF0C;vdb&amp;#xFF0C;vdc&amp;#x8FD9;&amp;#x79CD;&amp;#x8BBE;&amp;#x5907;&amp;#xFF09;&amp;#x6765;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid&amp;#x8BBE;&amp;#x5907;&amp;#x65F6;&amp;#xFF0C;&amp;#x5BF9;&amp;#x8BE5;&amp;#x8F6F;raid&amp;#x7684;&amp;#x5927;&amp;#x5757;&amp;#x8BFB;&amp;#x5199;&amp;#x5C31;&amp;#x4E0D;&amp;#x4F1A;&amp;#x6709;io&amp;#x62C6;&amp;#x5206;&amp;#x95EE;&amp;#x9898;&amp;#x3002;&amp;#x4E0B;&amp;#x9762;&amp;#x4EE5;&amp;#x4F8B;&amp;#x5B50;&amp;#x8BF4;&amp;#x660E;&amp;#x8FD9;&amp;#x4E2A;&amp;#x73B0;&amp;#x8C61;&amp;#xFF08;&amp;#x4EE5;raid1&amp;#xFF0C;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#x4E3A;&amp;#x4F8B;&amp;#xFF09;&amp;#x3002;&lt;/p&gt;
&lt;h1 id=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;a href=&quot;#&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot; class=&quot;headerlink&quot; title=&quot;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&quot;&gt;&lt;/a&gt;&amp;#x60C5;&amp;#x5F62;&amp;#x4E00;&amp;#xFF1A;&amp;#x4F7F;&amp;#x7528;&amp;#x88F8;&amp;#x8BBE;&amp;#x5907;&amp;#x521B;&amp;#x5EFA;&amp;#x8F6F;raid1&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# mdadm &amp;#x2013;create /dev/md/md_test1 &amp;#x2013;run &amp;#x2013;force &amp;#x2013;metadata=0.9 &amp;#x2013;assume-clean &amp;#x2013;level=1 &amp;#x2013;raid-devices=2 /dev/vdb /dev/vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# cat /proc/mdstat&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Personalities : [raid1]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;md127 : active (auto-read-only) raid1 vdc[1] vdb[0]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      20971456 blocks [2/2] [UU]&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;#x4F7F;&amp;#x7528;fio&amp;#x5BF9;&amp;#x8BE5;raid1&amp;#x8FDB;&amp;#x884C;&amp;#x968F;&amp;#x673A;&amp;#x5199;&amp;#x64CD;&amp;#x4F5C;&amp;#xFF08;&amp;#x987A;&amp;#x5E8F;&amp;#x5199;&amp;#x4E5F;&amp;#x662F;&amp;#x4E00;&amp;#x6837;&amp;#x7684;&amp;#xFF09;&amp;#xFF0C;&amp;#x5757;&amp;#x5927;&amp;#x5C0F;&amp;#x4E3A;64KB&amp;#xFF0C;fio&amp;#x7684;&amp;#x914D;&amp;#x7F6E;&amp;#x5982;&amp;#x4E0B;:&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[global]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rw=randwrite&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;direct=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;numjobs=1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ioengine=sync&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bsrange=64k-64k&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;rate_iops=60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;time_based&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;runtime=120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;group_reporting&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[disk00]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;filename=/dev/md127&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;fio&amp;#x5199;io&amp;#x8FC7;&amp;#x7A0B;&amp;#x4E2D;&amp;#xFF0C;&amp;#x4F7F;&amp;#x7528;iostat&amp;#x67E5;&amp;#x770B;&amp;#x8BBE;&amp;#x5907;&amp;#x7684;io&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#iostat -mx 2 md127 vdb vdc&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2016/05/03/systemtap-analysis-mdraid-io/con1-iostat.png&quot; alt=&quot;con1-iostat&quot;&gt;&lt;br&gt;&amp;#x53EF;&amp;#x4EE5;&amp;#x770B;&amp;#x5230;avgrq-sz&amp;#x4E3A;128&amp;#xFF0C;&amp;#x5355;&amp;#x4F4D;&amp;#x662F;&amp;#x6247;&amp;#x533A;&amp;#xFF0C;&amp;#x4E5F;&amp;#x5C31;&amp;#x662F;64KB&amp;#xFF0C;&amp;#x8BF4;&amp;#x660E;io&amp;#x5E76;&amp;#x6CA1;&amp;#x6709;&amp;#x8FDB;&amp;#x884C;&amp;#x62C6;&amp;#x5206;&amp;#x3002;&lt;/p&gt;
    
    </summary>
    
      <category term="storage" scheme="http://yoursite.com/categories/storage/"/>
    
    
      <category term="storage" scheme="http://yoursite.com/tags/storage/"/>
    
      <category term="mdraid" scheme="http://yoursite.com/tags/mdraid/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://yoursite.com/2016/04/28/hello-world/"/>
    <id>http://yoursite.com/2016/04/28/hello-world/</id>
    <published>2016-04-28T07:38:27.310Z</published>
    <updated>2016-04-28T07:42:28.455Z</updated>
    
    <content type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Create-a-new-post&quot;&gt;&lt;a href=&quot;#Create-a-new-post&quot; class=&quot;headerlink&quot; title=&quot;Create a new post&quot;&gt;&lt;/a&gt;Create a new post&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo new &lt;span class=&quot;string&quot;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/writing.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Writing&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Run-server&quot;&gt;&lt;a href=&quot;#Run-server&quot; class=&quot;headerlink&quot; title=&quot;Run server&quot;&gt;&lt;/a&gt;Run server&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/server.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Server&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Generate-static-files&quot;&gt;&lt;a href=&quot;#Generate-static-files&quot; class=&quot;headerlink&quot; title=&quot;Generate static files&quot;&gt;&lt;/a&gt;Generate static files&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/generating.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Generating&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Deploy-to-remote-sites&quot;&gt;&lt;a href=&quot;#Deploy-to-remote-sites&quot; class=&quot;headerlink&quot; title=&quot;Deploy to remote sites&quot;&gt;&lt;/a&gt;Deploy to remote sites&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;a href=&quot;https://hexo.io/docs/deployment.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Deployment&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
    
    </summary>
    
    
  </entry>
  
</feed>
